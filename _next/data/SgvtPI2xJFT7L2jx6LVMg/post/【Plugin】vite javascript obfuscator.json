{"pageProps":{"post":{"id":11,"title":"【Plugin】vite javascript obfuscator","created_at":"2024-10-25T03:29:18Z","updated_at":"2024-11-19T08:49:21Z","content":"# 适用于Vite环境的JavaScript混淆插件\r\n\r\n>仓库地址：[vite-plugin-bundle-obfuscator](https://github.com/z0ffy/vite-plugin-bundle-obfuscator)\r\n\r\n## ⭐️ 特性\r\n\r\n- [x] ⚡ 支持 Vite 项目中的 JavaScript 混淆。\r\n- [x] 🚀 多线程支持，以获得更好的性能。\r\n- [x] ⚙️ 可定制的混淆器选项，以满足您的需求。\r\n- [x] 🛡️ 自动排除 node_modules。\r\n- [x] 📦 支持 node_modules 拆分块。\r\n\r\n## ⚠️ 注意\r\n\r\n- 如果混淆选项stringArray为true。\r\n    - 您的结果可能会丢失一些捆绑包（在__vite__mapDeps数组中）。\r\n    - 我正在寻找一个准确的案例。\r\n- 如果打包过程中出现内存溢出。修改打包命令为：cross-env NODE_OPTIONS=--max-old-space-size=8192 VITE_CJS_IGNORE_WARNING=true vite build，其中 max-old-space-size 根据机器配置自行设置。\r\n- 在设置 node_modules 分包时，请把准确的包名前置。例如：[\"vue-router\", \"vue\"]，\"vue\"可以同时匹配到 vue 以及 vue-router。\r\n\r\n## 🌐 在线示例\r\n\r\n- [Vite - Vanilla](https://stackblitz.com/edit/vitejs-vite-zsytij?file=vite.config.js)\r\n- [Vite - Vue](https://stackblitz.com/edit/vitejs-vite-ywho91?file=vite.config.js)\r\n- [Vite - React](https://stackblitz.com/edit/vitejs-vite-wyeur4?file=vite.config.js)\r\n- [Vite - PReact](https://stackblitz.com/edit/vitejs-vite-oujmks?file=vite.config.js)\r\n- [Vite - lit](https://stackblitz.com/edit/vitejs-vite-ru4gws?file=vite.config.js)\r\n- [Vite - Svelte](https://stackblitz.com/edit/vitejs-vite-fthdtu?file=vite.config.js)\r\n- [Vite - Solid](https://stackblitz.com/edit/vitejs-vite-dcx3eh?file=vite.config.js)\r\n- [Vite - Qwik](https://stackblitz.com/edit/vitejs-vite-i2bjvq?file=vite.config.js,package.json)\r\n- ...\r\n\r\n\r\n## 📦 安装\r\n\r\n```bash\r\n# 使用npm\r\nnpm install vite-plugin-bundle-obfuscator -D\r\n\r\n# 使用pnpm\r\npnpm add vite-plugin-bundle-obfuscator -D\r\n\r\n# 使用yarn\r\nyarn add vite-plugin-bundle-obfuscator -D\r\n```\r\n\r\n## 👨‍💻 使用\r\n\r\n1. 使用您首选的软件包管理器安装插件。\r\n2. 在vite.config.js中注册插件。\r\n3. 自定义混淆器配置或使用默认选项。\r\n\r\n示例:\r\n\r\n```javascript\r\nimport vitePluginBundleObfuscator from 'vite-plugin-bundle-obfuscator';\r\n\r\nconst defaultObfuscatorConfig = {\r\n  excludes: [],\r\n  enable: true,\r\n  log: true,\r\n  autoExcludeNodeModules: false,\r\n  threadPool: false,\r\n  options: {\r\n    compact: true,\r\n    controlFlowFlattening: true,\r\n    controlFlowFlatteningThreshold: 1,\r\n    deadCodeInjection: false,\r\n    debugProtection: false,\r\n    debugProtectionInterval: 0,\r\n    disableConsoleOutput: false,\r\n    identifierNamesGenerator: 'hexadecimal',\r\n    log: false,\r\n    numbersToExpressions: false,\r\n    renameGlobals: false,\r\n    selfDefending: true,\r\n    simplify: true,\r\n    splitStrings: false,\r\n    stringArray: false,\r\n    stringArrayCallsTransform: false,\r\n    stringArrayCallsTransformThreshold: 0.5,\r\n    stringArrayEncoding: [],\r\n    stringArrayIndexShift: true,\r\n    stringArrayRotate: true,\r\n    stringArrayShuffle: true,\r\n    stringArrayWrappersCount: 1,\r\n    stringArrayWrappersChainedCalls: true,\r\n    stringArrayWrappersParametersMaxCount: 2,\r\n    stringArrayWrappersType: 'variable',\r\n    stringArrayThreshold: 0.75,\r\n    unicodeEscapeSequence: false,\r\n  }\r\n};\r\n\r\nexport default {\r\n  plugins: [\r\n    // vitePluginBundleObfuscator()\r\n    vitePluginBundleObfuscator(defaultObfuscatorConfig)\r\n  ]\r\n};\r\n```\r\n","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/11/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","前端"]}},"__N_SSG":true}