<!DOCTYPE html><html lang="zh-CN" id="html"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><title data-next-head="">【Fnm】Node 多版本管理</title><meta name="description" content="# 以 fnm 管理 Node.js 版本：实践经验与取舍

对于需要在多个 Node.js 版本之间来回切换的团队而言，一个高效的版本管理器决定了日常开发体验。fnm（Fast Node Manager）正是为此而生：它由
Rust 编写，致力于用更快的速度、更低的资源占用解决多版本 Node 管" data-next-head=""/><meta name="keywords" content="【Fnm】Node 多版本管理" data-next-head=""/><meta name="author" content="zoffy" data-next-head=""/><meta property="og:title" content="【Fnm】Node 多版本管理" data-next-head=""/><meta property="og:description" content="# 以 fnm 管理 Node.js 版本：实践经验与取舍

对于需要在多个 Node.js 版本之间来回切换的团队而言，一个高效的版本管理器决定了日常开发体验。fnm（Fast Node Manager）正是为此而生：它由
Rust 编写，致力于用更快的速度、更低的资源占用解决多版本 Node 管" data-next-head=""/><meta property="og:type" content="article" data-next-head=""/><meta property="og:url" content="https://zoffy.me" data-next-head=""/><link rel="shortcut icon" href="/favicon.ico"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/6d81d75fe333818b.css" as="style"/><link rel="preload" href="/_next/static/chunks/c90e9ab7017dd0cd.css" as="style"/><link rel="stylesheet" href="/_next/static/chunks/6d81d75fe333818b.css" data-n-g=""/><link rel="stylesheet" href="/_next/static/chunks/c90e9ab7017dd0cd.css" data-n-p=""/><noscript data-n-css=""></noscript><script src="/_next/static/chunks/48d0fe8859a0ffbd.js" defer=""></script><script src="/_next/static/chunks/d5847fd9a00a515b.js" defer=""></script><script src="/_next/static/chunks/7338272cab6de884.js" defer=""></script><script src="/_next/static/chunks/turbopack-9551559bd523530e.js" defer=""></script><script src="/_next/static/chunks/984bc9d1c36bbddd.js" defer=""></script><script src="/_next/static/chunks/bc5e63a268893597.js" defer=""></script><script src="/_next/static/chunks/d16cb117a3db2eca.js" defer=""></script><script src="/_next/static/chunks/turbopack-6c3449e6af536a39.js" defer=""></script><script src="/_next/static/PEFLxkXznns4kpANnNFsR/_ssgManifest.js" defer=""></script><script src="/_next/static/PEFLxkXznns4kpANnNFsR/_buildManifest.js" defer=""></script></head><body class="dark:bg-black bg-slate-50"><div id="__next"><script>((e,i,s,u,m,a,l,h)=>{let d=document.documentElement,w=["light","dark"];function p(n){(Array.isArray(e)?e:[e]).forEach(y=>{let k=y==="class",S=k&&a?m.map(f=>a[f]||f):m;k?(d.classList.remove(...S),d.classList.add(a&&a[n]?a[n]:n)):d.setAttribute(y,n)}),R(n)}function R(n){h&&w.includes(n)&&(d.style.colorScheme=n)}function c(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(u)p(u);else try{let n=localStorage.getItem(i)||s,y=l&&n==="system"?c():n;p(y)}catch(n){}})("data-theme","theme","system",null,["light","dark"],null,true,true)</script><div class="flex flex-col h-screen container w-full md:w-3/4 xl:w-1/2"><header><div class="my-10 flex self-center flex-row justify-between"><div class="flex self-center flex-row justify-between"><a class="md:text-2xl text-xl cursor-pointer dark:hover:text-white dark:text-gray-400 text-gray-500 hover:text-black transition-colors duration-200 font-en" href="/">cd ..</a></div><div class="self-center text-sm sm:text-lg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="2em" height="2em" viewBox="0 0 24 24" class="cursor-pointer"><path fill="currentColor" d="M12 5q-.425 0-.712-.288Q11 4.425 11 4V2q0-.425.288-.713Q11.575 1 12 1t.713.287Q13 1.575 13 2v2q0 .425-.287.712Q12.425 5 12 5Zm4.95 2.05q-.275-.275-.275-.688q0-.412.275-.712l1.4-1.425q.3-.3.712-.3q.413 0 .713.3q.275.275.275.7q0 .425-.275.7L18.35 7.05q-.275.275-.7.275q-.425 0-.7-.275ZM20 13q-.425 0-.712-.288Q19 12.425 19 12t.288-.713Q19.575 11 20 11h2q.425 0 .712.287q.288.288.288.713t-.288.712Q22.425 13 22 13Zm-8 10q-.425 0-.712-.288Q11 22.425 11 22v-2q0-.425.288-.712Q11.575 19 12 19t.713.288Q13 19.575 13 20v2q0 .425-.287.712Q12.425 23 12 23ZM5.65 7.05l-1.425-1.4q-.3-.3-.3-.725t.3-.7q.275-.275.7-.275q.425 0 .7.275L7.05 5.65q.275.275.275.7q0 .425-.275.7q-.3.275-.7.275q-.4 0-.7-.275Zm12.7 12.725l-1.4-1.425q-.275-.3-.275-.712q0-.413.275-.688q.275-.275.688-.275q.412 0 .712.275l1.425 1.4q.3.275.287.7q-.012.425-.287.725q-.3.3-.725.3t-.7-.3ZM2 13q-.425 0-.712-.288Q1 12.425 1 12t.288-.713Q1.575 11 2 11h2q.425 0 .713.287Q5 11.575 5 12t-.287.712Q4.425 13 4 13Zm2.225 6.775q-.275-.275-.275-.7q0-.425.275-.7L5.65 16.95q.275-.275.688-.275q.412 0 .712.275q.3.3.3.713q0 .412-.3.712l-1.4 1.4q-.3.3-.725.3t-.7-.3ZM12 18q-2.5 0-4.25-1.75T6 12q0-2.5 1.75-4.25T12 6q2.5 0 4.25 1.75T18 12q0 2.5-1.75 4.25T12 18Zm0-2q1.65 0 2.825-1.175Q16 13.65 16 12q0-1.65-1.175-2.825Q13.65 8 12 8q-1.65 0-2.825 1.175Q8 10.35 8 12q0 1.65 1.175 2.825Q10.35 16 12 16Z"></path></svg></div></div></header><main class="grow"><div><div class="flex flex-col mb-2"><div class="text-4xl sm:text-4xl font-medium dark:text-gray-200">【Fnm】Node 多版本管理</div><div class="sm:text-lg text-sm mt-2 dark:text-gray-400"><span>2025年11月14日</span> / <span>2025年11月14日</span></div></div><br/><div class="font-normal"><h1 class="sm:text-4xl text-3xl my-12 mb-6 dark:text-white font-medium">以 fnm 管理 Node.js 版本：实践经验与取舍</h1>
<p node="[object Object]" class="sm:text-xl text-lg mt-4 dark:text-gray-300">对于需要在多个 Node.js 版本之间来回切换的团队而言，一个高效的版本管理器决定了日常开发体验。fnm（Fast Node Manager）正是为此而生：它由
Rust 编写，致力于用更快的速度、更低的资源占用解决多版本 Node 管理问题。本文结合实际使用，系统整理 fnm
的安装方式、使用步骤、优缺点、注意事项，并与常见工具进行了对比，帮助你更有底气地落地。</p>
<h1 class="sm:text-4xl text-3xl my-12 mb-6 dark:text-white font-medium">主要特性与亮点</h1>
<ol node="[object Object]" class="sm:text-xl text-lg my-4 list-decimal pl-10 dark:text-gray-300">
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">极快的启动速度</strong>：Rust 实现带来更快的 CLI 响应，在频繁切换版本或多次打开终端时尤其明显。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">轻量级依赖</strong>：fnm 自身安装包体积小，内部采用懒加载的方式下载 Node 版本，不会像 nvm 那样在 shell 初始化阶段执行大量脚本。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">跨平台支持</strong>：macOS、Linux、Windows（含 PowerShell）都提供原生支持，对混合环境开发团队更友好。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">与版本文件联动</strong>：默认支持识别 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">.node-version</code>、<code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">.nvmrc</code> 等文件，可在进入项目目录时自动切换 Node 版本。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">体验更现代</strong>：支持 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">--install-if-missing</code>、<code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">--log-level</code> 等现代 CLI 选项，能够直接通过环境变量控制行为，便于自动化。</li>
</ol>
<h1 class="sm:text-4xl text-3xl my-12 mb-6 dark:text-white font-medium">安装方式一览</h1>
<h1 class="sm:text-4xl text-3xl my-12 mb-6 dark:text-white font-medium">macOS / Linux</h1>
<ol node="[object Object]" class="sm:text-xl text-lg my-4 list-decimal pl-10 dark:text-gray-300">
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">Homebrew</strong>（macOS 或 Linuxbrew）：
<pre><div node="[object Object]" style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.8rem 0;overflow:auto;border-radius:0.5rem"><code class="font-en text-md" style="white-space:pre"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span>brew </span><span class="token" style="color:#DD4A68">install</span><span> fnm</span></code></div></pre>
Homebrew 会自动处理依赖，升级时只需 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">brew upgrade fnm</code> 即可。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">脚本安装</strong>（通用）：
<pre><div node="[object Object]" style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.8rem 0;overflow:auto;border-radius:0.5rem"><code class="font-en text-md" style="white-space:pre"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span class="token" style="color:#DD4A68">curl</span><span> </span><span class="token parameter" style="color:#e90">-fsSL</span><span> https://fnm.vercel.app/install </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#DD4A68">bash</span></code></div></pre>
该脚本会把执行文件放到 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">~/.fnm</code> 并提示你如何修改 shell 配置。企业内网可替换成自建镜像地址。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">手动安装</strong>：
<ul node="[object Object]" class="sm:text-xl text-lg list-disc pl-5 my-5 dark:text-gray-300">
<li class="list-none my-1">在 GitHub Release 下载压缩包。</li>
<li class="list-none my-1">将二进制放到 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">/usr/local/bin</code> 或 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">~/bin</code>。</li>
<li class="list-none my-1">在 shell 配置文件中手动添加 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">eval &quot;$(fnm env --use-on-cd)&quot;</code>。</li>
</ul>
</li>
</ol>
<h1 class="sm:text-4xl text-3xl my-12 mb-6 dark:text-white font-medium">Windows / PowerShell</h1>
<ul node="[object Object]" class="sm:text-xl text-lg list-disc pl-5 my-5 dark:text-gray-300">
<li class="list-none my-1">使用 Scoop：<code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">scoop install fnm</code></li>
<li class="list-none my-1">使用 Chocolatey：<code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">choco install fnm</code></li>
<li class="list-none my-1">使用 Winget：<code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">winget install Schniz.fnm</code></li>
<li class="list-none my-1">PowerShell 中需执行 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">fnm env --use-on-cd | Out-String | Invoke-Expression</code> 来注入环境变量。</li>
</ul>
<p node="[object Object]" class="sm:text-xl text-lg mt-4 dark:text-gray-300"><strong node="[object Object]" class="font-bold dark:text-gray-100">安装完成后验证</strong>：</p>
<pre><div node="[object Object]" style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.8rem 0;overflow:auto;border-radius:0.5rem"><code class="font-en text-md" style="white-space:pre"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span>fnm </span><span class="token parameter" style="color:#e90">--version</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span></span><span class="token" style="color:#DD4A68">which</span><span> fnm        </span><span class="token" style="color:slategray"># 确保路径正确</span></code></div></pre>
<h1 class="sm:text-4xl text-3xl my-12 mb-6 dark:text-white font-medium">基本使用步骤</h1>
<pre><div node="[object Object]" style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.8rem 0;overflow:auto;border-radius:0.5rem"><code class="font-en text-md" style="white-space:pre"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span class="token" style="color:slategray"># 安装常见操作</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span>fnm list                      </span><span class="token" style="color:slategray"># 查看已安装的 Node 版本</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span>fnm ls-remote                 </span><span class="token" style="color:slategray"># 查看可安装的远程版本</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span><span>fnm </span><span class="token" style="color:#DD4A68">install</span><span> </span><span class="token" style="color:#905">18</span><span>                </span><span class="token" style="color:slategray"># 安装 LTS 18（支持部分版本号）</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span><span>fnm </span><span class="token" style="color:#DD4A68">install</span><span> </span><span class="token parameter" style="color:#e90">--lts</span><span>             </span><span class="token" style="color:slategray"># 直接安装最新 LTS</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span><span>fnm use </span><span class="token" style="color:#905">20</span><span>                    </span><span class="token" style="color:slategray"># 当前 shell 切换至 Node 20</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span><span>fnm default </span><span class="token" style="color:#905">18</span><span>                </span><span class="token" style="color:slategray"># 设置默认版本</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">8</span><span>fnm use --install-if-missing </span><span class="token" style="color:#905">16</span><span>   </span><span class="token" style="color:slategray"># 缺失时自动安装</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">9</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">10</span><span></span><span class="token" style="color:slategray"># 将环境自动注入 shell（例如 zsh）</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">11</span><span></span><span class="token" style="color:#DD4A68">eval</span><span> </span><span class="token" style="color:#999">\</span><span>&quot;</span><span class="token" style="color:#e90">$(</span><span class="token" style="color:#e90">fnm </span><span class="token" style="color:#DD4A68">env</span><span class="token" style="color:#e90"> --use-on-cd</span><span class="token" style="color:#e90">)</span><span class="token" style="color:#999">\</span><span>&quot;</span></code></div></pre>
<ul node="[object Object]" class="sm:text-xl text-lg list-disc pl-5 my-5 dark:text-gray-300">
<li class="list-none my-1">安装完成后建议把 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">fnm env --use-on-cd</code> 的输出加入 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">~/.zshrc</code> 或 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">~/.bashrc</code>，这样进入不同项目目录时能自动检测版本文件。</li>
<li class="list-none my-1">如果项目使用 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">.node-version</code>，只要文件内写着 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">18.19.0</code> 之类的版本号，就能让 fnm 自动匹配。</li>
<li class="list-none my-1"><code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">fnm env --shell fish</code>、<code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">fnm env --shell powershell</code> 可以生成不同 shell 所需的命令，避免语法不兼容。</li>
</ul>
<h1 class="sm:text-4xl text-3xl my-12 mb-6 dark:text-white font-medium">进阶玩法与实战案例</h1>
<h1 class="sm:text-4xl text-3xl my-12 mb-6 dark:text-white font-medium">为 Monorepo 统一 Node 版本</h1>
<ol node="[object Object]" class="sm:text-xl text-lg my-4 list-decimal pl-10 dark:text-gray-300">
<li class="list-none my-1">在仓库根目录放置 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">.node-version</code>，写入 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">20.11.1</code> 这样的 LTS 版本。</li>
<li class="list-none my-1">在 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">package.json</code> 的 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">engines.node</code> 中保持一致，形成双保险。</li>
<li class="list-none my-1">配置 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">.git/hooks/post-checkout</code> 或 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">direnv</code>，在切换分支后运行 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">fnm use --install-if-missing</code>，确保每位开发者都自动安装指定版本。</li>
</ol>
<h1 class="sm:text-4xl text-3xl my-12 mb-6 dark:text-white font-medium">与 npm/yarn/pnpm 结合</h1>
<ul node="[object Object]" class="sm:text-xl text-lg list-disc pl-5 my-5 dark:text-gray-300">
<li class="list-none my-1">可在 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">package.json</code> 的 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">scripts</code> 中直接调用 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">fnm</code>：
<pre><div node="[object Object]" style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.8rem 0;overflow:auto;border-radius:0.5rem"><code class="font-en text-md" style="white-space:pre"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span>  </span><span class="token" style="color:#905">&quot;scripts&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span>    </span><span class="token" style="color:#905">&quot;dev&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;fnm use --install-if-missing 18 &amp;&amp; vite dev&quot;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span><span>  </span><span class="token" style="color:#999">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span><span></span><span class="token" style="color:#999">}</span></code></div></pre>
适用于 CI/CD，避免构建机 Node 版本漂移。</li>
<li class="list-none my-1">如果还要固定 npm/yarn/pnpm 版本，可在 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">postinstall</code> 中调用 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">corepack enable</code>，或结合 Volta 只管理工具链，fnm 专注于 Node。</li>
</ul>
<h1 class="sm:text-4xl text-3xl my-12 mb-6 dark:text-white font-medium">借助 alias 做多版本测试</h1>
<pre><div node="[object Object]" style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.8rem 0;overflow:auto;border-radius:0.5rem"><code class="font-en text-md" style="white-space:pre"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span>fnm </span><span class="token" style="color:#DD4A68">alias</span><span> </span><span class="token" style="color:#905">18</span><span> lts
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span>fnm </span><span class="token" style="color:#DD4A68">alias</span><span> </span><span class="token" style="color:#905">20</span><span> latest
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span>fnm use lts
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span><span></span><span class="token" style="color:#DD4A68">pnpm</span><span> </span><span class="token" style="color:#DD4A68">test</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span>fnm use latest
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span><span></span><span class="token" style="color:#DD4A68">pnpm</span><span> </span><span class="token" style="color:#DD4A68">test</span></code></div></pre>
<p node="[object Object]" class="sm:text-xl text-lg mt-4 dark:text-gray-300">在同一终端中就能快速切换 LTS 与 Current，对库作者非常实用。</p>
<h1 class="sm:text-4xl text-3xl my-12 mb-6 dark:text-white font-medium">控制缓存、镜像与日志</h1>
<pre><div node="[object Object]" style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:1.8rem 0;overflow:auto;border-radius:0.5rem"><code class="font-en text-md" style="white-space:pre"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span class="token" style="color:#DD4A68">export</span><span> </span><span class="token assign-left" style="color:#e90">FNM_MULTISHELL_PATH</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=~</span><span>/.cache/fnm-shell
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span></span><span class="token" style="color:#DD4A68">export</span><span> </span><span class="token assign-left" style="color:#e90">FNM_NODE_DIST_MIRROR</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>https://npmmirror.com/mirrors/node/
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span></span><span class="token" style="color:#DD4A68">export</span><span> </span><span class="token assign-left" style="color:#e90">FNM_LOG_LEVEL</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>error</span></code></div></pre>
<ul node="[object Object]" class="sm:text-xl text-lg list-disc pl-5 my-5 dark:text-gray-300">
<li class="list-none my-1"><code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">FNM_MULTISHELL_PATH</code> 可将临时 shims 放在自定义目录，方便在容器或只读系统中使用。</li>
<li class="list-none my-1"><code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">FNM_NODE_DIST_MIRROR</code> 解决内网下载慢的问题。</li>
<li class="list-none my-1"><code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">FNM_LOG_LEVEL</code> 能控制输出，CI 失败时更容易排障。</li>
</ul>
<h1 class="sm:text-4xl text-3xl my-12 mb-6 dark:text-white font-medium">优点</h1>
<ul node="[object Object]" class="sm:text-xl text-lg list-disc pl-5 my-5 dark:text-gray-300">
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">速度快、体验流畅</strong>：在 M 系列 Mac 或 Linux 上切换版本几乎没有感知延迟；终端初始化时也不会明显拖慢。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">内置压缩缓存</strong>：下载的 Node 版本会被缓存，重装同一版本时无需重新下载，大幅减少网络流量。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">简洁命令语义</strong>：命令与 nvm 几乎一致，迁移成本低；<code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">fnm completions</code> 还能生成 shell 补全脚本，减少输入错误。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">适合 CI/CD 场景</strong>：通过 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">fnm env --json</code> 导出设置，可在 CI 中快速切换 Node 版本而无需读取庞大的 shell 脚本。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">易于脚本化</strong>：<code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">fnm current --format json</code> 等命令可程序化读取，方便写 lint 或守护脚本。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">多 shell 友好</strong>：官方提供 bash、zsh、fish、PowerShell、Nushell 等示例，节省配置时间。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">二进制发布稳定</strong>：Release 由 GitHub Actions 自动构建，checksum 公开，满足部分安全审计需求。</li>
</ul>
<h1 class="sm:text-4xl text-3xl my-12 mb-6 dark:text-white font-medium">缺点</h1>
<ul node="[object Object]" class="sm:text-xl text-lg list-disc pl-5 my-5 dark:text-gray-300">
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">安装脚本差异</strong>：部分旧教程仍以 curl/bash 脚本为主，但在企业环境下需要额外配置代理或镜像才能顺利执行。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">插件不如 asdf 丰富</strong>：fnm 专注 Node，本身并不管理其他语言；若团队还要统一 Python、Ruby 等，需要额外工具。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">Windows 需额外适配</strong>：PowerShell、Git Bash、WSL 的配置方式略有差异，新同事入场需要注意文档。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">版本同步策略需自定</strong>：fnm 不会自动更新 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">.node-version</code>，仍需要团队约定流程（如 CI check）来避免乱序。</li>
</ul>
<h1 class="sm:text-4xl text-3xl my-12 mb-6 dark:text-white font-medium">使用注意事项</h1>
<ol node="[object Object]" class="sm:text-xl text-lg my-4 list-decimal pl-10 dark:text-gray-300">
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">配置 PATH 先后顺序</strong>：<code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">fnm env</code> 输出的 PATH 需要排在系统 Node 之前，否则可能仍调用到系统自带版本。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">全局 npm 包位置</strong>：切换 Node 版本后，全局 npm 包存放在各自的 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">~/.fnm/node-versions/&lt;version&gt;</code> 目录，若依赖全局 CLI
需重新安装。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">代理与镜像</strong>：内网环境若需要代理，可通过 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">FNM_NODE_DIST_MIRROR</code> 环境变量指向镜像站，以避免下载超时。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">与其他管理器共存</strong>：如果同机还装了 nvm 或 asdf，要确保 shell 初始化脚本中只启用一个 Node 版本管理器，避免 PATH 冲突。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">CI 中缓存 node_modules 的策略</strong>：切换 Node 版本会导致 node_modules 失效，记得把 Node 版本也纳入缓存 key，例如
<code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">node-${{ steps.fnm.outputs.node-version }}</code>。</li>
<li class="list-none my-1"><strong node="[object Object]" class="font-bold dark:text-gray-100">升级策略</strong>：升级 fnm 后建议重新打开终端以载入最新 shim；如需脚本化，可在升级后执行 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">hash -r</code> 清理 shell 的 command
cache。</li>
</ol>
<h1 class="sm:text-4xl text-3xl my-12 mb-6 dark:text-white font-medium">常见问题与排障</h1>



































<table node="[object Object]" class="sm:w-11/12 w-full text-lg mx-auto px-2 my-3 dark:text-gray-300"><thead node="[object Object]" class="font-bold border-solid bg-gray-100 dark:bg-gray-900"><tr><th class="border-solid border-x-2 border-y-2 dark:border-gray-900">问题</th><th class="border-solid border-x-2 border-y-2 dark:border-gray-900">现象</th><th class="border-solid border-x-2 border-y-2 dark:border-gray-900">解决办法</th></tr></thead><tbody node="[object Object]" class="text-center"><tr><td class="border-solid border-x-2 border-y-2 dark:border-gray-900"><code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">node -v</code> 仍显示系统版本</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">PATH 优先级不正确</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">确认 shell 配置中 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">eval &quot;$(fnm env)&quot;</code> 在其他 Node 相关脚本之前</td></tr><tr><td class="border-solid border-x-2 border-y-2 dark:border-gray-900"><code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">fnm install</code> 速度极慢</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">访问官方镜像受限</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">设置 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">FNM_NODE_DIST_MIRROR</code> 为公司镜像，如阿里云、腾讯云</td></tr><tr><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">CI 中 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">fnm use</code> 失效</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">非登录 Shell 未加载配置</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">在脚本开头执行 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">eval &quot;$(fnm env --use-on-cd)&quot;</code>，或直接 export <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">PATH</code></td></tr><tr><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">多终端冲突</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">打开多个 shell 后切换版本异常</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">设置 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">FNM_MULTISHELL_PATH</code> 为每个终端独立目录，或在 shell 退出时执行 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">fnm env --uninstall</code></td></tr><tr><td class="border-solid border-x-2 border-y-2 dark:border-gray-900"><code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">.node-version</code> 不生效</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">文件找不到</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">确保文件在项目根目录且没有多余空格；也可改用 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">.nvmrc</code> 兼容其他工具</td></tr></tbody></table>
<h1 class="sm:text-4xl text-3xl my-12 mb-6 dark:text-white font-medium">与常见方案对比</h1>








































<table node="[object Object]" class="sm:w-11/12 w-full text-lg mx-auto px-2 my-3 dark:text-gray-300"><thead node="[object Object]" class="font-bold border-solid bg-gray-100 dark:bg-gray-900"><tr><th class="border-solid border-x-2 border-y-2 dark:border-gray-900">工具</th><th class="border-solid border-x-2 border-y-2 dark:border-gray-900">语言支持</th><th class="border-solid border-x-2 border-y-2 dark:border-gray-900">性能</th><th class="border-solid border-x-2 border-y-2 dark:border-gray-900">学习成本</th><th class="border-solid border-x-2 border-y-2 dark:border-gray-900">适用场景</th></tr></thead><tbody node="[object Object]" class="text-center"><tr><td class="border-solid border-x-2 border-y-2 dark:border-gray-900"><strong node="[object Object]" class="font-bold dark:text-gray-100">fnm</strong></td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">仅 Node.js</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">启动/切换速度快</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">与 nvm 类似</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">Node 项目为主、关注性能的个人或团队</td></tr><tr><td class="border-solid border-x-2 border-y-2 dark:border-gray-900"><strong node="[object Object]" class="font-bold dark:text-gray-100">nvm</strong></td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">仅 Node.js</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">shell 初始化慢</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">文档和社区丰富</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">传统方案，团队已有大量脚本基于 nvm</td></tr><tr><td class="border-solid border-x-2 border-y-2 dark:border-gray-900"><strong node="[object Object]" class="font-bold dark:text-gray-100">asdf</strong></td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">多语言插件</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">取决于插件</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">更复杂，需要管理 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">.tool-versions</code></td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">需要统一多语言版本管理的团队</td></tr><tr><td class="border-solid border-x-2 border-y-2 dark:border-gray-900"><strong node="[object Object]" class="font-bold dark:text-gray-100">Volta</strong></td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">Node/JS 工具链</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">常驻后台，切换快</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">有独特命令体系</td><td class="border-solid border-x-2 border-y-2 dark:border-gray-900">需要固定 npm/yarn/pnpm 版本，关注稳定性</td></tr></tbody></table>
<ul node="[object Object]" class="sm:text-xl text-lg list-disc pl-5 my-5 dark:text-gray-300">
<li class="list-none my-1">如果团队只管理 Node 版本且追求更快的开发体验，fnm 在大多数情况下都会优于 nvm。</li>
<li class="list-none my-1">如果还需要统一 npm、yarn、pnpm 的版本或锁定工具链，Volta 是不错的替代者。</li>
<li class="list-none my-1">若项目中存在多种语言，asdf 的插件系统能提供更通用的方案，只是操作体验更复杂。</li>
<li class="list-none my-1">在容器化或 serverless 环境中，如果需要每次冷启动快速拉起 Node，fnm 的二进制能力会比 nvm 的大量 shell 逻辑更占优势。</li>
<li class="list-none my-1">需要跨平台 + GUI 引导时，可考虑使用 <code class="text-gray-600 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded" node="[object Object]">nvs</code>（Node Version Switcher），但其社区活跃度低于 fnm。</li>
</ul>
<h1 class="sm:text-4xl text-3xl my-12 mb-6 dark:text-white font-medium">结语</h1>
<p node="[object Object]" class="sm:text-xl text-lg mt-4 dark:text-gray-300">fnm 并不是包治百病的工具，但在 Node.js 版本管理领域提供了一种高效、直接的方案。了解它的安装方法、进阶配置、优缺点以及与其他工具的差异，能让团队在选择版本管理器时更加自信。如果你正准备迁移
nvm、搭建多平台开发环境或优化 CI 时间，不妨尝试一次 fnm，把实践经验写进团队手册，让版本管理不再是日常开发的阻力。</p></div><br/><div></div><a class="float-right mt-10 sm:text-2xl text-xl text-gray-500 hover:text-black transition-colors duration-200 dark:text-gray-400 dark:hover:text-gray-100" href="/">cd ..</a></div></main><footer class="container mx-auto text-center text-gray-700 dark:text-gray-400"><div class="flex flex-row justify-center mb-5 space-x-5"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.8em" height="1.8em" viewBox="0 0 24 24" class="cursor-pointer"><path fill="currentColor" fill-rule="evenodd" d="M3.5 3.25a.75.75 0 0 1 .75-.75C14.053 2.5 22 10.447 22 20.25a.75.75 0 0 1-1.5 0C20.5 11.275 13.225 4 4.25 4a.75.75 0 0 1-.75-.75zM3.5 19a2 2 0 1 1 4 0a2 2 0 0 1-4 0zm.75-9.5a.75.75 0 0 0 0 1.5a9.25 9.25 0 0 1 9.25 9.25a.75.75 0 0 0 1.5 0C15 14.313 10.187 9.5 4.25 9.5z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.8em" height="1.8em" viewBox="0 0 24 24" class="cursor-pointer"><path fill="currentColor" d="M4 20q-.825 0-1.412-.587Q2 18.825 2 18V6q0-.825.588-1.412Q3.175 4 4 4h16q.825 0 1.413.588Q22 5.175 22 6v12q0 .825-.587 1.413Q20.825 20 20 20ZM20 8l-7.475 4.675q-.125.075-.263.112q-.137.038-.262.038t-.262-.038q-.138-.037-.263-.112L4 8v10h16Zm-8 3l8-5H4ZM4 8v.25v-1.475v.025V6v.8v-.013V8.25V8v10Z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.8em" height="1.8em" cursor="pointer" viewBox="0 0 16 16"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5.75 14.25s-.5-2 .5-3c0 0-2 0-3.5-1.5s-1-4.5 0-5.5c-.5-1.5.5-2.5.5-2.5s1.5 0 2.5 1c1-.5 3.5-.5 4.5 0c1-1 2.5-1 2.5-1s1 1 .5 2.5c1 1 1.5 4 0 5.5s-3.5 1.5-3.5 1.5c1 1 .5 3 .5 3m-5-.5c-1.5.5-3-.5-3.5-1"></path></svg></div><div class="flex items-center flex-wrap mb-10 font-en justify-center"><span>©<!-- -->2026<!-- -->. </span><span>All rights reserved by </span><a href="https://github.com/z0ffy" class="text-blue-500 hover:text-blue-900 transition-colors duration-300">z0ffy</a><span>.</span></div></footer><div class="bottom-10 right-10 cursor-pointer fixed hidden lg:block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.8em" height="1.8em" viewBox="0 0 24 24" class="opacity-0 duration-700 transition-opacity ease-in-out"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 19h14a2 2 0 0 0 1.84-2.75L13.74 4a2 2 0 0 0-3.5 0l-7.1 12.25A2 2 0 0 0 4.89 19"></path></svg></div><div id="sakana-widget" class="cursor-pointer bottom-0 left-16 fixed hidden xl:block"></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":32,"title":"【Fnm】Node 多版本管理","created_at":"2025-11-14T03:00:47Z","updated_at":"2025-11-14T03:01:00Z","content":"# 以 fnm 管理 Node.js 版本：实践经验与取舍\n\n对于需要在多个 Node.js 版本之间来回切换的团队而言，一个高效的版本管理器决定了日常开发体验。fnm（Fast Node Manager）正是为此而生：它由\nRust 编写，致力于用更快的速度、更低的资源占用解决多版本 Node 管理问题。本文结合实际使用，系统整理 fnm\n的安装方式、使用步骤、优缺点、注意事项，并与常见工具进行了对比，帮助你更有底气地落地。\n\n## 主要特性与亮点\n\n1. **极快的启动速度**：Rust 实现带来更快的 CLI 响应，在频繁切换版本或多次打开终端时尤其明显。\n2. **轻量级依赖**：fnm 自身安装包体积小，内部采用懒加载的方式下载 Node 版本，不会像 nvm 那样在 shell 初始化阶段执行大量脚本。\n3. **跨平台支持**：macOS、Linux、Windows（含 PowerShell）都提供原生支持，对混合环境开发团队更友好。\n4. **与版本文件联动**：默认支持识别 `.node-version`、`.nvmrc` 等文件，可在进入项目目录时自动切换 Node 版本。\n5. **体验更现代**：支持 `--install-if-missing`、`--log-level` 等现代 CLI 选项，能够直接通过环境变量控制行为，便于自动化。\n\n## 安装方式一览\n\n### macOS / Linux\n\n1. **Homebrew**（macOS 或 Linuxbrew）：\n   ```bash\n   brew install fnm\n   ```\n   Homebrew 会自动处理依赖，升级时只需 `brew upgrade fnm` 即可。\n2. **脚本安装**（通用）：\n   ```bash\n   curl -fsSL https://fnm.vercel.app/install | bash\n   ```\n   该脚本会把执行文件放到 `~/.fnm` 并提示你如何修改 shell 配置。企业内网可替换成自建镜像地址。\n3. **手动安装**：\n    - 在 GitHub Release 下载压缩包。\n    - 将二进制放到 `/usr/local/bin` 或 `~/bin`。\n    - 在 shell 配置文件中手动添加 `eval \"$(fnm env --use-on-cd)\"`。\n\n### Windows / PowerShell\n\n- 使用 Scoop：`scoop install fnm`\n- 使用 Chocolatey：`choco install fnm`\n- 使用 Winget：`winget install Schniz.fnm`\n- PowerShell 中需执行 `fnm env --use-on-cd | Out-String | Invoke-Expression` 来注入环境变量。\n\n**安装完成后验证**：\n\n```bash\nfnm --version\nwhich fnm        # 确保路径正确\n```\n\n## 基本使用步骤\n\n```bash\n# 安装常见操作\nfnm list                      # 查看已安装的 Node 版本\nfnm ls-remote                 # 查看可安装的远程版本\nfnm install 18                # 安装 LTS 18（支持部分版本号）\nfnm install --lts             # 直接安装最新 LTS\nfnm use 20                    # 当前 shell 切换至 Node 20\nfnm default 18                # 设置默认版本\nfnm use --install-if-missing 16   # 缺失时自动安装\n\n# 将环境自动注入 shell（例如 zsh）\neval \\\"$(fnm env --use-on-cd)\\\"\n```\n\n- 安装完成后建议把 `fnm env --use-on-cd` 的输出加入 `~/.zshrc` 或 `~/.bashrc`，这样进入不同项目目录时能自动检测版本文件。\n- 如果项目使用 `.node-version`，只要文件内写着 `18.19.0` 之类的版本号，就能让 fnm 自动匹配。\n- `fnm env --shell fish`、`fnm env --shell powershell` 可以生成不同 shell 所需的命令，避免语法不兼容。\n\n## 进阶玩法与实战案例\n\n### 为 Monorepo 统一 Node 版本\n\n1. 在仓库根目录放置 `.node-version`，写入 `20.11.1` 这样的 LTS 版本。\n2. 在 `package.json` 的 `engines.node` 中保持一致，形成双保险。\n3. 配置 `.git/hooks/post-checkout` 或 `direnv`，在切换分支后运行 `fnm use --install-if-missing`，确保每位开发者都自动安装指定版本。\n\n### 与 npm/yarn/pnpm 结合\n\n- 可在 `package.json` 的 `scripts` 中直接调用 `fnm`：\n  ```json\n  {\n    \"scripts\": {\n      \"dev\": \"fnm use --install-if-missing 18 \u0026\u0026 vite dev\"\n    }\n  }\n  ```\n  适用于 CI/CD，避免构建机 Node 版本漂移。\n- 如果还要固定 npm/yarn/pnpm 版本，可在 `postinstall` 中调用 `corepack enable`，或结合 Volta 只管理工具链，fnm 专注于 Node。\n\n### 借助 alias 做多版本测试\n\n```bash\nfnm alias 18 lts\nfnm alias 20 latest\nfnm use lts\npnpm test\nfnm use latest\npnpm test\n```\n\n在同一终端中就能快速切换 LTS 与 Current，对库作者非常实用。\n\n### 控制缓存、镜像与日志\n\n```bash\nexport FNM_MULTISHELL_PATH=~/.cache/fnm-shell\nexport FNM_NODE_DIST_MIRROR=https://npmmirror.com/mirrors/node/\nexport FNM_LOG_LEVEL=error\n```\n\n- `FNM_MULTISHELL_PATH` 可将临时 shims 放在自定义目录，方便在容器或只读系统中使用。\n- `FNM_NODE_DIST_MIRROR` 解决内网下载慢的问题。\n- `FNM_LOG_LEVEL` 能控制输出，CI 失败时更容易排障。\n\n## 优点\n\n- **速度快、体验流畅**：在 M 系列 Mac 或 Linux 上切换版本几乎没有感知延迟；终端初始化时也不会明显拖慢。\n- **内置压缩缓存**：下载的 Node 版本会被缓存，重装同一版本时无需重新下载，大幅减少网络流量。\n- **简洁命令语义**：命令与 nvm 几乎一致，迁移成本低；`fnm completions` 还能生成 shell 补全脚本，减少输入错误。\n- **适合 CI/CD 场景**：通过 `fnm env --json` 导出设置，可在 CI 中快速切换 Node 版本而无需读取庞大的 shell 脚本。\n- **易于脚本化**：`fnm current --format json` 等命令可程序化读取，方便写 lint 或守护脚本。\n- **多 shell 友好**：官方提供 bash、zsh、fish、PowerShell、Nushell 等示例，节省配置时间。\n- **二进制发布稳定**：Release 由 GitHub Actions 自动构建，checksum 公开，满足部分安全审计需求。\n\n## 缺点\n\n- **安装脚本差异**：部分旧教程仍以 curl/bash 脚本为主，但在企业环境下需要额外配置代理或镜像才能顺利执行。\n- **插件不如 asdf 丰富**：fnm 专注 Node，本身并不管理其他语言；若团队还要统一 Python、Ruby 等，需要额外工具。\n- **Windows 需额外适配**：PowerShell、Git Bash、WSL 的配置方式略有差异，新同事入场需要注意文档。\n- **版本同步策略需自定**：fnm 不会自动更新 `.node-version`，仍需要团队约定流程（如 CI check）来避免乱序。\n\n## 使用注意事项\n\n1. **配置 PATH 先后顺序**：`fnm env` 输出的 PATH 需要排在系统 Node 之前，否则可能仍调用到系统自带版本。\n2. **全局 npm 包位置**：切换 Node 版本后，全局 npm 包存放在各自的 `~/.fnm/node-versions/\u003cversion\u003e` 目录，若依赖全局 CLI\n   需重新安装。\n3. **代理与镜像**：内网环境若需要代理，可通过 `FNM_NODE_DIST_MIRROR` 环境变量指向镜像站，以避免下载超时。\n4. **与其他管理器共存**：如果同机还装了 nvm 或 asdf，要确保 shell 初始化脚本中只启用一个 Node 版本管理器，避免 PATH 冲突。\n5. **CI 中缓存 node_modules 的策略**：切换 Node 版本会导致 node_modules 失效，记得把 Node 版本也纳入缓存 key，例如\n   `node-${{ steps.fnm.outputs.node-version }}`。\n6. **升级策略**：升级 fnm 后建议重新打开终端以载入最新 shim；如需脚本化，可在升级后执行 `hash -r` 清理 shell 的 command\n   cache。\n\n## 常见问题与排障\n\n| 问题                  | 现象                 | 解决办法                                                                    |\n|---------------------|--------------------|-------------------------------------------------------------------------|\n| `node -v` 仍显示系统版本   | PATH 优先级不正确        | 确认 shell 配置中 `eval \"$(fnm env)\"` 在其他 Node 相关脚本之前                        |\n| `fnm install` 速度极慢  | 访问官方镜像受限           | 设置 `FNM_NODE_DIST_MIRROR` 为公司镜像，如阿里云、腾讯云                                |\n| CI 中 `fnm use` 失效   | 非登录 Shell 未加载配置    | 在脚本开头执行 `eval \"$(fnm env --use-on-cd)\"`，或直接 export `PATH`               |\n| 多终端冲突               | 打开多个 shell 后切换版本异常 | 设置 `FNM_MULTISHELL_PATH` 为每个终端独立目录，或在 shell 退出时执行 `fnm env --uninstall` |\n| `.node-version` 不生效 | 文件找不到              | 确保文件在项目根目录且没有多余空格；也可改用 `.nvmrc` 兼容其他工具                                  |\n\n## 与常见方案对比\n\n| 工具        | 语言支持        | 性能         | 学习成本                      | 适用场景                        |\n|-----------|-------------|------------|---------------------------|-----------------------------|\n| **fnm**   | 仅 Node.js   | 启动/切换速度快   | 与 nvm 类似                  | Node 项目为主、关注性能的个人或团队        |\n| **nvm**   | 仅 Node.js   | shell 初始化慢 | 文档和社区丰富                   | 传统方案，团队已有大量脚本基于 nvm         |\n| **asdf**  | 多语言插件       | 取决于插件      | 更复杂，需要管理 `.tool-versions` | 需要统一多语言版本管理的团队              |\n| **Volta** | Node/JS 工具链 | 常驻后台，切换快   | 有独特命令体系                   | 需要固定 npm/yarn/pnpm 版本，关注稳定性 |\n\n- 如果团队只管理 Node 版本且追求更快的开发体验，fnm 在大多数情况下都会优于 nvm。\n- 如果还需要统一 npm、yarn、pnpm 的版本或锁定工具链，Volta 是不错的替代者。\n- 若项目中存在多种语言，asdf 的插件系统能提供更通用的方案，只是操作体验更复杂。\n- 在容器化或 serverless 环境中，如果需要每次冷启动快速拉起 Node，fnm 的二进制能力会比 nvm 的大量 shell 逻辑更占优势。\n- 需要跨平台 + GUI 引导时，可考虑使用 `nvs`（Node Version Switcher），但其社区活跃度低于 fnm。\n\n## 结语\n\nfnm 并不是包治百病的工具，但在 Node.js 版本管理领域提供了一种高效、直接的方案。了解它的安装方法、进阶配置、优缺点以及与其他工具的差异，能让团队在选择版本管理器时更加自信。如果你正准备迁移\nnvm、搭建多平台开发环境或优化 CI 时间，不妨尝试一次 fnm，把实践经验写进团队手册，让版本管理不再是日常开发的阻力。\n","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/32/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","前端"]}},"__N_SSG":true},"page":"/post/[id]","query":{"id":"【Fnm】Node 多版本管理"},"buildId":"PEFLxkXznns4kpANnNFsR","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>