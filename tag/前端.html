<!DOCTYPE html><html lang="zh-CN" id="html"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><title data-next-head="">z0ffy&#x27;s website</title><link rel="shortcut icon" href="/favicon.ico"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/1858daf11024a084.css" as="style"/><link rel="preload" href="/_next/static/chunks/c90e9ab7017dd0cd.css" as="style"/><link rel="stylesheet" href="/_next/static/chunks/1858daf11024a084.css" data-n-g=""/><link rel="stylesheet" href="/_next/static/chunks/c90e9ab7017dd0cd.css" data-n-p=""/><noscript data-n-css=""></noscript><script src="/_next/static/chunks/93faa808d3cb2a1a.js" defer=""></script><script src="/_next/static/chunks/fb35f26dcc53f612.js" defer=""></script><script src="/_next/static/chunks/f7fe9d4ad63b8030.js" defer=""></script><script src="/_next/static/chunks/turbopack-c159d46132d11533.js" defer=""></script><script src="/_next/static/chunks/f008527cf47238d2.js" defer=""></script><script src="/_next/static/chunks/09f15e1bb5cbd7af.js" defer=""></script><script src="/_next/static/chunks/turbopack-4d617d3c1ae99a83.js" defer=""></script><script src="/_next/static/vbNnOTB9J9odoHtpOLgIq/_ssgManifest.js" defer=""></script><script src="/_next/static/vbNnOTB9J9odoHtpOLgIq/_buildManifest.js" defer=""></script></head><body class="dark:bg-black bg-slate-50"><div id="__next"><script>((e,i,s,u,m,a,l,h)=>{let d=document.documentElement,w=["light","dark"];function p(n){(Array.isArray(e)?e:[e]).forEach(y=>{let k=y==="class",S=k&&a?m.map(f=>a[f]||f):m;k?(d.classList.remove(...S),d.classList.add(a&&a[n]?a[n]:n)):d.setAttribute(y,n)}),R(n)}function R(n){h&&w.includes(n)&&(d.style.colorScheme=n)}function c(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(u)p(u);else try{let n=localStorage.getItem(i)||s,y=l&&n==="system"?c():n;p(y)}catch(n){}})("data-theme","theme","system",null,["light","dark"],null,true,true)</script><div class="flex flex-col h-screen container w-full md:w-3/4 xl:w-1/2"><header><div class="my-10 flex self-center flex-row justify-between"><div class="flex self-center flex-row justify-between"><a class="md:text-2xl text-xl cursor-pointer dark:hover:text-white dark:text-gray-400 text-gray-500 hover:text-black transition-colors duration-200 font-en" href="/">cd ..</a></div><div class="self-center text-sm sm:text-lg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="2em" height="2em" viewBox="0 0 24 24" class="cursor-pointer"><path fill="currentColor" d="M12 5q-.425 0-.712-.288Q11 4.425 11 4V2q0-.425.288-.713Q11.575 1 12 1t.713.287Q13 1.575 13 2v2q0 .425-.287.712Q12.425 5 12 5Zm4.95 2.05q-.275-.275-.275-.688q0-.412.275-.712l1.4-1.425q.3-.3.712-.3q.413 0 .713.3q.275.275.275.7q0 .425-.275.7L18.35 7.05q-.275.275-.7.275q-.425 0-.7-.275ZM20 13q-.425 0-.712-.288Q19 12.425 19 12t.288-.713Q19.575 11 20 11h2q.425 0 .712.287q.288.288.288.713t-.288.712Q22.425 13 22 13Zm-8 10q-.425 0-.712-.288Q11 22.425 11 22v-2q0-.425.288-.712Q11.575 19 12 19t.713.288Q13 19.575 13 20v2q0 .425-.287.712Q12.425 23 12 23ZM5.65 7.05l-1.425-1.4q-.3-.3-.3-.725t.3-.7q.275-.275.7-.275q.425 0 .7.275L7.05 5.65q.275.275.275.7q0 .425-.275.7q-.3.275-.7.275q-.4 0-.7-.275Zm12.7 12.725l-1.4-1.425q-.275-.3-.275-.712q0-.413.275-.688q.275-.275.688-.275q.412 0 .712.275l1.425 1.4q.3.275.287.7q-.012.425-.287.725q-.3.3-.725.3t-.7-.3ZM2 13q-.425 0-.712-.288Q1 12.425 1 12t.288-.713Q1.575 11 2 11h2q.425 0 .713.287Q5 11.575 5 12t-.287.712Q4.425 13 4 13Zm2.225 6.775q-.275-.275-.275-.7q0-.425.275-.7L5.65 16.95q.275-.275.688-.275q.412 0 .712.275q.3.3.3.713q0 .412-.3.712l-1.4 1.4q-.3.3-.725.3t-.7-.3ZM12 18q-2.5 0-4.25-1.75T6 12q0-2.5 1.75-4.25T12 6q2.5 0 4.25 1.75T18 12q0 2.5-1.75 4.25T12 18Zm0-2q1.65 0 2.825-1.175Q16 13.65 16 12q0-1.65-1.175-2.825Q13.65 8 12 8q-1.65 0-2.825 1.175Q8 10.35 8 12q0 1.65 1.175 2.825Q10.35 16 12 16Z"></path></svg></div></div></header><main class="grow"><div><div class="mb-5 text-center text-4xl dark:text-gray-400">#<!-- -->前端</div><div class="flex flex-col mb-10"><div class="flex flex-row gap-2 flex-wrap mt-1 justify-between"><div class="space-x-2"><a class="cursor-pointer text-xl dark:hover:text-white dark:text-gray-400 hover:text-gray-600 duration-200" href="/post/%E3%80%90Fnm%E3%80%91Node%20%E5%A4%9A%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86">【Fnm】Node 多版本管理</a><div class="xl:inline-block hidden space-x-3">  <a class="hover:text-blue-900 transition-colors duration-200 text-blue-500 text-md" href="/tag/%E5%89%8D%E7%AB%AF">#<!-- -->前端</a></div></div><span class="text-lg self-center">11月14日</span></div><div class="flex flex-row gap-2 flex-wrap mt-1 justify-between"><div class="space-x-2"><a class="cursor-pointer text-xl dark:hover:text-white dark:text-gray-400 hover:text-gray-600 duration-200" href="/post/%E3%80%90DEV%E3%80%91%E6%8F%90%E5%8D%87%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87%E7%9A%84%E5%88%A9%E5%99%A8%EF%BC%9Acode-inspector-plugin">【DEV】提升开发效率的利器：code-inspector-plugin</a><div class="xl:inline-block hidden space-x-3">  <a class="hover:text-blue-900 transition-colors duration-200 text-blue-500 text-md" href="/tag/%E5%89%8D%E7%AB%AF">#<!-- -->前端</a></div></div><span class="text-lg self-center">11月10日</span></div><div class="flex flex-row gap-2 flex-wrap mt-1 justify-between"><div class="space-x-2"><a class="cursor-pointer text-xl dark:hover:text-white dark:text-gray-400 hover:text-gray-600 duration-200" href="/post/%E3%80%90Electron%E3%80%91%E6%98%AF%E5%90%A6%E5%9C%A8%20Electron%20%E4%B8%AD%E8%BF%90%E8%A1%8C">【Electron】是否在 Electron 中运行</a><div class="xl:inline-block hidden space-x-3">  <a class="hover:text-blue-900 transition-colors duration-200 text-blue-500 text-md" href="/tag/%E5%89%8D%E7%AB%AF">#<!-- -->前端</a></div></div><span class="text-lg self-center">4月7日</span></div><div class="flex flex-row gap-2 flex-wrap mt-1 justify-between"><div class="space-x-2"><a class="cursor-pointer text-xl dark:hover:text-white dark:text-gray-400 hover:text-gray-600 duration-200" href="/post/%E3%80%90%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%91%E6%92%AD%E6%94%BE%20pcm%20%E6%B5%81">【小程序】播放 pcm 流</a><div class="xl:inline-block hidden space-x-3">  <a class="hover:text-blue-900 transition-colors duration-200 text-blue-500 text-md" href="/tag/%E5%89%8D%E7%AB%AF">#<!-- -->前端</a></div></div><span class="text-lg self-center">1月1日</span></div></div><div class="flex flex-col mb-10"><div class="sm:text-3xl text-2xl font-medium sm:my-3 my-1 italic text-gray-500 dark:text-gray-100">2024</div><div class="flex flex-row gap-2 flex-wrap mt-1 justify-between"><div class="space-x-2"><a class="cursor-pointer text-xl dark:hover:text-white dark:text-gray-400 hover:text-gray-600 duration-200" href="/post/%E3%80%90OSS%E3%80%91%E5%89%8D%E7%AB%AF%E7%9B%B4%E4%BC%A0%20oss">【OSS】前端直传 oss</a><div class="xl:inline-block hidden space-x-3">  <a class="hover:text-blue-900 transition-colors duration-200 text-blue-500 text-md" href="/tag/%E5%89%8D%E7%AB%AF">#<!-- -->前端</a></div></div><span class="text-lg self-center">12月3日</span></div><div class="flex flex-row gap-2 flex-wrap mt-1 justify-between"><div class="space-x-2"><a class="cursor-pointer text-xl dark:hover:text-white dark:text-gray-400 hover:text-gray-600 duration-200" href="/post/%E3%80%90%E6%9B%B4%E6%96%B0%E6%8F%90%E9%86%92%E3%80%91Web%20%E5%AE%9E%E7%8E%B0%E6%9B%B4%E6%96%B0%E6%8F%90%E9%86%92">【更新提醒】Web 实现更新提醒</a><div class="xl:inline-block hidden space-x-3">  <a class="hover:text-blue-900 transition-colors duration-200 text-blue-500 text-md" href="/tag/%E5%89%8D%E7%AB%AF">#<!-- -->前端</a></div></div><span class="text-lg self-center">11月26日</span></div><div class="flex flex-row gap-2 flex-wrap mt-1 justify-between"><div class="space-x-2"><a class="cursor-pointer text-xl dark:hover:text-white dark:text-gray-400 hover:text-gray-600 duration-200" href="/post/%E3%80%90Vue%E3%80%91Vue3%20%E9%87%8D%E7%BD%AE%E7%BB%84%E4%BB%B6%E7%8A%B6%E6%80%81">【Vue】Vue3 重置组件状态</a><div class="xl:inline-block hidden space-x-3">  <a class="hover:text-blue-900 transition-colors duration-200 text-blue-500 text-md" href="/tag/%E5%89%8D%E7%AB%AF">#<!-- -->前端</a><a class="hover:text-blue-900 transition-colors duration-200 text-blue-500 text-md" href="/tag/vue">#<!-- -->vue</a></div></div><span class="text-lg self-center">11月22日</span></div><div class="flex flex-row gap-2 flex-wrap mt-1 justify-between"><div class="space-x-2"><a class="cursor-pointer text-xl dark:hover:text-white dark:text-gray-400 hover:text-gray-600 duration-200" href="/post/%E3%80%90Wasm%E3%80%91SharedArrayBuffer(SAB)%20is%20not%20defined">【Wasm】SharedArrayBuffer(SAB) is not defined</a><div class="xl:inline-block hidden space-x-3">  <a class="hover:text-blue-900 transition-colors duration-200 text-blue-500 text-md" href="/tag/%E5%89%8D%E7%AB%AF">#<!-- -->前端</a></div></div><span class="text-lg self-center">11月18日</span></div><div class="flex flex-row gap-2 flex-wrap mt-1 justify-between"><div class="space-x-2"><a class="cursor-pointer text-xl dark:hover:text-white dark:text-gray-400 hover:text-gray-600 duration-200" href="/post/%E3%80%90React%20hack%E3%80%91%E5%9C%A8%20React%20%E4%B8%AD%E6%A8%A1%E6%8B%9F%E8%A7%A6%E5%8F%91%E8%BE%93%E5%85%A5">【React hack】在 React 中模拟触发输入</a><div class="xl:inline-block hidden space-x-3">  <a class="hover:text-blue-900 transition-colors duration-200 text-blue-500 text-md" href="/tag/%E5%89%8D%E7%AB%AF">#<!-- -->前端</a><a class="hover:text-blue-900 transition-colors duration-200 text-blue-500 text-md" href="/tag/react">#<!-- -->react</a></div></div><span class="text-lg self-center">11月11日</span></div><div class="flex flex-row gap-2 flex-wrap mt-1 justify-between"><div class="space-x-2"><a class="cursor-pointer text-xl dark:hover:text-white dark:text-gray-400 hover:text-gray-600 duration-200" href="/post/%E3%80%90Vue%20router%E3%80%91%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%8C%B9%E9%85%8D%E4%B8%8B%E7%9A%84%E6%9D%83%E9%99%90%E5%A4%84%E7%90%86">【Vue router】动态路由匹配下的权限处理</a><div class="xl:inline-block hidden space-x-3">  <a class="hover:text-blue-900 transition-colors duration-200 text-blue-500 text-md" href="/tag/%E5%89%8D%E7%AB%AF">#<!-- -->前端</a></div></div><span class="text-lg self-center">11月6日</span></div><div class="flex flex-row gap-2 flex-wrap mt-1 justify-between"><div class="space-x-2"><a class="cursor-pointer text-xl dark:hover:text-white dark:text-gray-400 hover:text-gray-600 duration-200" href="/post/%E3%80%90%E7%A7%92%E7%BA%A7%E3%80%91%E8%8E%B7%E5%8F%96%E8%A7%86%E9%A2%91%E6%97%B6%E5%88%BB%E5%9B%BE">【秒级】获取视频时刻图</a><div class="xl:inline-block hidden space-x-3">  <a class="hover:text-blue-900 transition-colors duration-200 text-blue-500 text-md" href="/tag/%E5%89%8D%E7%AB%AF">#<!-- -->前端</a></div></div><span class="text-lg self-center">10月28日</span></div><div class="flex flex-row gap-2 flex-wrap mt-1 justify-between"><div class="space-x-2"><a class="cursor-pointer text-xl dark:hover:text-white dark:text-gray-400 hover:text-gray-600 duration-200" href="/post/%E3%80%90Plugin%E3%80%91Vite%20Javascript%20obfuscator">【Plugin】Vite Javascript obfuscator</a><div class="xl:inline-block hidden space-x-3">  <a class="hover:text-blue-900 transition-colors duration-200 text-blue-500 text-md" href="/tag/%E5%89%8D%E7%AB%AF">#<!-- -->前端</a></div></div><span class="text-lg self-center">10月25日</span></div></div></div></main><footer class="container mx-auto text-center text-gray-700 dark:text-gray-400"><div class="flex flex-row justify-center mb-5 space-x-5"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.8em" height="1.8em" viewBox="0 0 24 24" class="cursor-pointer"><path fill="currentColor" fill-rule="evenodd" d="M3.5 3.25a.75.75 0 0 1 .75-.75C14.053 2.5 22 10.447 22 20.25a.75.75 0 0 1-1.5 0C20.5 11.275 13.225 4 4.25 4a.75.75 0 0 1-.75-.75zM3.5 19a2 2 0 1 1 4 0a2 2 0 0 1-4 0zm.75-9.5a.75.75 0 0 0 0 1.5a9.25 9.25 0 0 1 9.25 9.25a.75.75 0 0 0 1.5 0C15 14.313 10.187 9.5 4.25 9.5z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.8em" height="1.8em" viewBox="0 0 24 24" class="cursor-pointer"><path fill="currentColor" d="M4 20q-.825 0-1.412-.587Q2 18.825 2 18V6q0-.825.588-1.412Q3.175 4 4 4h16q.825 0 1.413.588Q22 5.175 22 6v12q0 .825-.587 1.413Q20.825 20 20 20ZM20 8l-7.475 4.675q-.125.075-.263.112q-.137.038-.262.038t-.262-.038q-.138-.037-.263-.112L4 8v10h16Zm-8 3l8-5H4ZM4 8v.25v-1.475v.025V6v.8v-.013V8.25V8v10Z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.8em" height="1.8em" cursor="pointer" viewBox="0 0 16 16"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5.75 14.25s-.5-2 .5-3c0 0-2 0-3.5-1.5s-1-4.5 0-5.5c-.5-1.5.5-2.5.5-2.5s1.5 0 2.5 1c1-.5 3.5-.5 4.5 0c1-1 2.5-1 2.5-1s1 1 .5 2.5c1 1 1.5 4 0 5.5s-3.5 1.5-3.5 1.5c1 1 .5 3 .5 3m-5-.5c-1.5.5-3-.5-3.5-1"></path></svg></div><div class="flex items-center flex-wrap mb-10 font-en justify-center"><span>©<!-- -->2025<!-- -->. </span><span>All rights reserved by </span><a href="https://github.com/z0ffy" class="text-blue-500 hover:text-blue-900 transition-colors duration-300">z0ffy</a><span>.</span></div></footer><div class="bottom-10 right-10 cursor-pointer fixed hidden lg:block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.8em" height="1.8em" viewBox="0 0 24 24" class="opacity-0 duration-700 transition-opacity ease-in-out"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 19h14a2 2 0 0 0 1.84-2.75L13.74 4a2 2 0 0 0-3.5 0l-7.1 12.25A2 2 0 0 0 4.89 19"></path></svg></div><div id="sakana-widget" class="cursor-pointer bottom-0 left-16 fixed hidden xl:block"></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"id":32,"title":"【Fnm】Node 多版本管理","created_at":"2025-11-14T03:00:47Z","updated_at":"2025-11-14T03:01:00Z","content":"# 以 fnm 管理 Node.js 版本：实践经验与取舍\n\n对于需要在多个 Node.js 版本之间来回切换的团队而言，一个高效的版本管理器决定了日常开发体验。fnm（Fast Node Manager）正是为此而生：它由\nRust 编写，致力于用更快的速度、更低的资源占用解决多版本 Node 管理问题。本文结合实际使用，系统整理 fnm\n的安装方式、使用步骤、优缺点、注意事项，并与常见工具进行了对比，帮助你更有底气地落地。\n\n## 主要特性与亮点\n\n1. **极快的启动速度**：Rust 实现带来更快的 CLI 响应，在频繁切换版本或多次打开终端时尤其明显。\n2. **轻量级依赖**：fnm 自身安装包体积小，内部采用懒加载的方式下载 Node 版本，不会像 nvm 那样在 shell 初始化阶段执行大量脚本。\n3. **跨平台支持**：macOS、Linux、Windows（含 PowerShell）都提供原生支持，对混合环境开发团队更友好。\n4. **与版本文件联动**：默认支持识别 `.node-version`、`.nvmrc` 等文件，可在进入项目目录时自动切换 Node 版本。\n5. **体验更现代**：支持 `--install-if-missing`、`--log-level` 等现代 CLI 选项，能够直接通过环境变量控制行为，便于自动化。\n\n## 安装方式一览\n\n### macOS / Linux\n\n1. **Homebrew**（macOS 或 Linuxbrew）：\n   ```bash\n   brew install fnm\n   ```\n   Homebrew 会自动处理依赖，升级时只需 `brew upgrade fnm` 即可。\n2. **脚本安装**（通用）：\n   ```bash\n   curl -fsSL https://fnm.vercel.app/install | bash\n   ```\n   该脚本会把执行文件放到 `~/.fnm` 并提示你如何修改 shell 配置。企业内网可替换成自建镜像地址。\n3. **手动安装**：\n    - 在 GitHub Release 下载压缩包。\n    - 将二进制放到 `/usr/local/bin` 或 `~/bin`。\n    - 在 shell 配置文件中手动添加 `eval \"$(fnm env --use-on-cd)\"`。\n\n### Windows / PowerShell\n\n- 使用 Scoop：`scoop install fnm`\n- 使用 Chocolatey：`choco install fnm`\n- 使用 Winget：`winget install Schniz.fnm`\n- PowerShell 中需执行 `fnm env --use-on-cd | Out-String | Invoke-Expression` 来注入环境变量。\n\n**安装完成后验证**：\n\n```bash\nfnm --version\nwhich fnm        # 确保路径正确\n```\n\n## 基本使用步骤\n\n```bash\n# 安装常见操作\nfnm list                      # 查看已安装的 Node 版本\nfnm ls-remote                 # 查看可安装的远程版本\nfnm install 18                # 安装 LTS 18（支持部分版本号）\nfnm install --lts             # 直接安装最新 LTS\nfnm use 20                    # 当前 shell 切换至 Node 20\nfnm default 18                # 设置默认版本\nfnm use --install-if-missing 16   # 缺失时自动安装\n\n# 将环境自动注入 shell（例如 zsh）\neval \\\"$(fnm env --use-on-cd)\\\"\n```\n\n- 安装完成后建议把 `fnm env --use-on-cd` 的输出加入 `~/.zshrc` 或 `~/.bashrc`，这样进入不同项目目录时能自动检测版本文件。\n- 如果项目使用 `.node-version`，只要文件内写着 `18.19.0` 之类的版本号，就能让 fnm 自动匹配。\n- `fnm env --shell fish`、`fnm env --shell powershell` 可以生成不同 shell 所需的命令，避免语法不兼容。\n\n## 进阶玩法与实战案例\n\n### 为 Monorepo 统一 Node 版本\n\n1. 在仓库根目录放置 `.node-version`，写入 `20.11.1` 这样的 LTS 版本。\n2. 在 `package.json` 的 `engines.node` 中保持一致，形成双保险。\n3. 配置 `.git/hooks/post-checkout` 或 `direnv`，在切换分支后运行 `fnm use --install-if-missing`，确保每位开发者都自动安装指定版本。\n\n### 与 npm/yarn/pnpm 结合\n\n- 可在 `package.json` 的 `scripts` 中直接调用 `fnm`：\n  ```json\n  {\n    \"scripts\": {\n      \"dev\": \"fnm use --install-if-missing 18 \u0026\u0026 vite dev\"\n    }\n  }\n  ```\n  适用于 CI/CD，避免构建机 Node 版本漂移。\n- 如果还要固定 npm/yarn/pnpm 版本，可在 `postinstall` 中调用 `corepack enable`，或结合 Volta 只管理工具链，fnm 专注于 Node。\n\n### 借助 alias 做多版本测试\n\n```bash\nfnm alias 18 lts\nfnm alias 20 latest\nfnm use lts\npnpm test\nfnm use latest\npnpm test\n```\n\n在同一终端中就能快速切换 LTS 与 Current，对库作者非常实用。\n\n### 控制缓存、镜像与日志\n\n```bash\nexport FNM_MULTISHELL_PATH=~/.cache/fnm-shell\nexport FNM_NODE_DIST_MIRROR=https://npmmirror.com/mirrors/node/\nexport FNM_LOG_LEVEL=error\n```\n\n- `FNM_MULTISHELL_PATH` 可将临时 shims 放在自定义目录，方便在容器或只读系统中使用。\n- `FNM_NODE_DIST_MIRROR` 解决内网下载慢的问题。\n- `FNM_LOG_LEVEL` 能控制输出，CI 失败时更容易排障。\n\n## 优点\n\n- **速度快、体验流畅**：在 M 系列 Mac 或 Linux 上切换版本几乎没有感知延迟；终端初始化时也不会明显拖慢。\n- **内置压缩缓存**：下载的 Node 版本会被缓存，重装同一版本时无需重新下载，大幅减少网络流量。\n- **简洁命令语义**：命令与 nvm 几乎一致，迁移成本低；`fnm completions` 还能生成 shell 补全脚本，减少输入错误。\n- **适合 CI/CD 场景**：通过 `fnm env --json` 导出设置，可在 CI 中快速切换 Node 版本而无需读取庞大的 shell 脚本。\n- **易于脚本化**：`fnm current --format json` 等命令可程序化读取，方便写 lint 或守护脚本。\n- **多 shell 友好**：官方提供 bash、zsh、fish、PowerShell、Nushell 等示例，节省配置时间。\n- **二进制发布稳定**：Release 由 GitHub Actions 自动构建，checksum 公开，满足部分安全审计需求。\n\n## 缺点\n\n- **安装脚本差异**：部分旧教程仍以 curl/bash 脚本为主，但在企业环境下需要额外配置代理或镜像才能顺利执行。\n- **插件不如 asdf 丰富**：fnm 专注 Node，本身并不管理其他语言；若团队还要统一 Python、Ruby 等，需要额外工具。\n- **Windows 需额外适配**：PowerShell、Git Bash、WSL 的配置方式略有差异，新同事入场需要注意文档。\n- **版本同步策略需自定**：fnm 不会自动更新 `.node-version`，仍需要团队约定流程（如 CI check）来避免乱序。\n\n## 使用注意事项\n\n1. **配置 PATH 先后顺序**：`fnm env` 输出的 PATH 需要排在系统 Node 之前，否则可能仍调用到系统自带版本。\n2. **全局 npm 包位置**：切换 Node 版本后，全局 npm 包存放在各自的 `~/.fnm/node-versions/\u003cversion\u003e` 目录，若依赖全局 CLI\n   需重新安装。\n3. **代理与镜像**：内网环境若需要代理，可通过 `FNM_NODE_DIST_MIRROR` 环境变量指向镜像站，以避免下载超时。\n4. **与其他管理器共存**：如果同机还装了 nvm 或 asdf，要确保 shell 初始化脚本中只启用一个 Node 版本管理器，避免 PATH 冲突。\n5. **CI 中缓存 node_modules 的策略**：切换 Node 版本会导致 node_modules 失效，记得把 Node 版本也纳入缓存 key，例如\n   `node-${{ steps.fnm.outputs.node-version }}`。\n6. **升级策略**：升级 fnm 后建议重新打开终端以载入最新 shim；如需脚本化，可在升级后执行 `hash -r` 清理 shell 的 command\n   cache。\n\n## 常见问题与排障\n\n| 问题                  | 现象                 | 解决办法                                                                    |\n|---------------------|--------------------|-------------------------------------------------------------------------|\n| `node -v` 仍显示系统版本   | PATH 优先级不正确        | 确认 shell 配置中 `eval \"$(fnm env)\"` 在其他 Node 相关脚本之前                        |\n| `fnm install` 速度极慢  | 访问官方镜像受限           | 设置 `FNM_NODE_DIST_MIRROR` 为公司镜像，如阿里云、腾讯云                                |\n| CI 中 `fnm use` 失效   | 非登录 Shell 未加载配置    | 在脚本开头执行 `eval \"$(fnm env --use-on-cd)\"`，或直接 export `PATH`               |\n| 多终端冲突               | 打开多个 shell 后切换版本异常 | 设置 `FNM_MULTISHELL_PATH` 为每个终端独立目录，或在 shell 退出时执行 `fnm env --uninstall` |\n| `.node-version` 不生效 | 文件找不到              | 确保文件在项目根目录且没有多余空格；也可改用 `.nvmrc` 兼容其他工具                                  |\n\n## 与常见方案对比\n\n| 工具        | 语言支持        | 性能         | 学习成本                      | 适用场景                        |\n|-----------|-------------|------------|---------------------------|-----------------------------|\n| **fnm**   | 仅 Node.js   | 启动/切换速度快   | 与 nvm 类似                  | Node 项目为主、关注性能的个人或团队        |\n| **nvm**   | 仅 Node.js   | shell 初始化慢 | 文档和社区丰富                   | 传统方案，团队已有大量脚本基于 nvm         |\n| **asdf**  | 多语言插件       | 取决于插件      | 更复杂，需要管理 `.tool-versions` | 需要统一多语言版本管理的团队              |\n| **Volta** | Node/JS 工具链 | 常驻后台，切换快   | 有独特命令体系                   | 需要固定 npm/yarn/pnpm 版本，关注稳定性 |\n\n- 如果团队只管理 Node 版本且追求更快的开发体验，fnm 在大多数情况下都会优于 nvm。\n- 如果还需要统一 npm、yarn、pnpm 的版本或锁定工具链，Volta 是不错的替代者。\n- 若项目中存在多种语言，asdf 的插件系统能提供更通用的方案，只是操作体验更复杂。\n- 在容器化或 serverless 环境中，如果需要每次冷启动快速拉起 Node，fnm 的二进制能力会比 nvm 的大量 shell 逻辑更占优势。\n- 需要跨平台 + GUI 引导时，可考虑使用 `nvs`（Node Version Switcher），但其社区活跃度低于 fnm。\n\n## 结语\n\nfnm 并不是包治百病的工具，但在 Node.js 版本管理领域提供了一种高效、直接的方案。了解它的安装方法、进阶配置、优缺点以及与其他工具的差异，能让团队在选择版本管理器时更加自信。如果你正准备迁移\nnvm、搭建多平台开发环境或优化 CI 时间，不妨尝试一次 fnm，把实践经验写进团队手册，让版本管理不再是日常开发的阻力。\n","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/32/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","前端"]},{"id":31,"title":"【DEV】提升开发效率的利器：code-inspector-plugin","created_at":"2025-11-10T01:59:58Z","updated_at":"2025-11-10T02:05:50Z","content":"## 前言\n\n在日常的 Web 开发中，尤其是在使用 Vue 或 React 等组件化框架构建的复杂项目中，我们经常会遇到一个痛点：如何在浏览器中快速定位某个 UI 元素对应的源代码？\n\n通常，我们的做法是打开浏览器的开发者工具，审查元素，找到一个独特的 class 或 id，然后在整个项目中进行全局搜索。如果项目结构复杂、组件嵌套层级深，这个过程会变得非常繁琐和低效。为了解决这个问题，`code-inspector-plugin` 应运而生。\n\n## 什么是 code-inspector-plugin？\n\n`code-inspector-plugin` 是一个开发辅助插件，它允许你在浏览器中点击页面上的任意元素，就能自动在你的 IDE（如 VS Code, WebStorm）中打开对应的源代码文件，并精确定位到相关行。它就像一座桥梁，将浏览器中的视图和项目中的代码紧密连接起来。\n\n## 为什么需要它？\n\n使用 `code-inspector-plugin` 可以带来诸多好处：\n\n1.  **极致的开发效率**：一键直达代码，省去了手动搜索文件的繁琐步骤，极大地提升了开发和调试效率。\n2.  **快速熟悉新项目**：对于刚接触一个新项目或复杂模块的开发者来说，这是一个快速理解代码结构和组件划分的神器。\n3.  **精准定位**：能够精确到代码行，无论是 HTML 结构还是组件引用，都能准确找到。\n4.  **非侵入式**：它仅在开发环境下生效，不会对生产环境的代码产生任何影响。\n\n## 如何安装和配置？\n\n以你当前这个 Vite + Vue 项目为例，集成 `code-inspector-plugin` 非常简单。\n\n### 1. 安装依赖\n\n首先，在项目根目录下执行以下命令来安装插件：\n\n```bash\npnpm add code-inspector-plugin -D\n```\n\n### 2. 配置 Vite\n\n接下来，打开项目根目录下的 `vite.config.js` 文件，引入插件并进行配置：\n\n```javascript\nimport { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\nimport { codeInspectorPlugin } from 'code-inspector-plugin'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [\n    vue(),\n    // 在这里添加插件配置\n    codeInspectorPlugin({\n      bundler: 'vite',\n    }),\n  ],\n  // ... 其他配置\n})\n```\n\n只需简单的两步，配置就完成了！\n\n## 如何使用？\n\n1.  **启动项目**：运行 `pnpm run dev` 启动你的开发服务器。\n2.  **打开浏览器**：在浏览器中访问你的项目。\n3.  **激活检查器**：将鼠标悬浮在页面上，按下组合键（Mac: `Option + A` / Windows: `Alt + A`），此时插件会被激活。\n4.  **点击元素**：激活后，你会看到鼠标悬浮的元素周围出现了边框提示。找到你想要查看的元素，单击它。\n5.  **自动跳转**：IDE 会自动弹出，并打开对应的文件和代码行。\n\n\u003e **注意**：首次使用可能需要授权浏览器或操作系统与 IDE 通信。同时，请确保你的 IDE 已经配置了命令行启动器（例如 VS Code 的 `code` 命令）。\n\n## 工作原理揭秘\n\n`code-inspector-plugin` 的神奇效果背后，是一套巧妙的“编译时代码注入”和“运行时信息上报”机制。\n\n### 1. 编译时：代码转换与信息注入\n\n这是最核心的一步。插件在项目编译打包的过程中（例如 Vite 或 Webpack 构建时）介入，对源代码进行“改造”。\n\n-   **AST 解析**：插件会使用 Babel 或 SWC 等工具将你的组件代码（如 `.vue` 或 `.jsx`）解析成一个**抽象语法树（AST）**。\n-   **遍历与注入**：插件会遍历 AST，找到代表 HTML 标签或组件的节点，然后将该**代码的源文件路径、行号、列号等信息，作为特殊的 HTML 属性（例如 `data-v-inspector-file=\"path/to/YourComponent.vue\"`）注入到这个标签上**。\n\n因此，你写的代码在开发模式下，最终渲染到浏览器 DOM 中时，每个元素都携带了自己的“身份证”——它的源码位置信息。\n\n### 2. 运行时：事件监听与信息捕获\n\n插件还会在你的应用入口处注入一小段客户端脚本，它只在开发环境中运行，负责：\n\n-   **监听组合键**：等待用户按下激活组合键。\n-   **捕获鼠标事件**：激活后，监听鼠标的移动和点击事件。\n-   **提取信息**：当用户点击某个元素时，脚本会立即读取注入的 `data-v-inspector-*` 属性，拿到该元素对应的文件路径和行号。\n\n### 3. 通信：从浏览器到 IDE\n\n拿到文件路径信息后，需要通知 IDE 打开它。\n\n-   **启动本地服务**：插件会在启动开发服务器的同时，启动一个自己的小型 HTTP 中间件服务。\n-   **发送请求**：浏览器端的脚本在获取到文件路径后，会立即向这个本地服务发送一个 HTTP 请求，并在 URL 中带上文件路径作为参数。\n-   **执行 Shell 命令**：本地服务接收到请求后，会解析出文件路径，然后在你的电脑上执行一条命令行（Shell）命令来启动 IDE 并打开指定文件（例如 `code -g \"/path/to/your/file:line:column\"`）。\n\n通过这个流程，`code-inspector-plugin` 优雅地实现了从浏览器视图到 IDE 代码的无缝跳转。\n\n## 总结\n\n`code-inspector-plugin` 是一个简单、强大且对开发者极为友好的工具。它通过打通浏览器和 IDE 之间的壁垒，解决了组件代码定位的难题，显著提升了开发体验和效率。如果你还没有尝试过，强烈建议在你的下一个项目中集成它，体验一下“指哪打哪”的快感！\n","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/31/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","前端"]},{"id":29,"title":"【Electron】是否在 Electron 中运行","created_at":"2025-04-07T08:04:08Z","updated_at":"2025-04-07T08:10:25Z","content":"# 简介\n\n在 **Electron** 里，**nodeIntegration** 这个属性控制着渲染进程能否使用 **Node.js** 的 **API**。当 **nodeIntegration** 设置为 **true** 时，渲染进程会和 **Node.js** 环境集成，这意味着在渲染进程的全局 **window** 对象上会暴露 **Node.js** 的全局变量和 API，其中就包括 **process** 对象。所以，开启 **nodeIntegration** 之后，可以通过 **window.process** 访问到 **Node.js** 的 **process** 对象。\n\n# 检测\n\n```javascript\nif (typeof process !== 'undefined' \u0026\u0026 typeof process.versions === 'object' \u0026\u0026 !!process.versions.electron) {\n  return true;\n}\n```","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/29/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","前端"]},{"id":26,"title":"【小程序】播放 pcm 流","created_at":"2025-01-01T17:32:02Z","updated_at":"2025-01-21T07:35:02Z","content":"### 实时播放 pcm 流\n\n```javascript\nexport class PCMPlayer {\n  constructor(option) {\n    this.init(option);\n  }\n\n  init(option) {\n    const defaultOption = {\n      inputCodec: 'Int16', // 传入的数据是采用多少位编码，默认16位\n      channels: 1, // 声道数\n      sampleRate: 8000, // 采样率 单位Hz\n      flushTime: 1000, // 缓存时间 单位 ms\n      fftSize: 2048 // analyserNode fftSize\n    };\n\n    this.option = Object.assign({}, defaultOption, option); // 实例最终配置参数\n    this.samples = new Float32Array(); // 样本存放区域\n    this.interval = setInterval(this.flush.bind(this), this.option.flushTime);\n    this.convertValue = this.getConvertValue();\n    this.typedArray = this.getTypedArray();\n    this.initAudioContext();\n    this.bindAudioContextEvent();\n  }\n\n  getConvertValue() {\n    // 根据传入的目标编码位数\n    // 选定转换数据所需要的基本值\n    const inputCodecs = {\n      'Int8': 128,\n      'Int16': 32768,\n      'Int32': 2147483648,\n      'Float32': 1\n    };\n    if (!inputCodecs[this.option.inputCodec]) throw new Error('wrong codec.please input one of these codecs:Int8,Int16,Int32,Float32');\n    return inputCodecs[this.option.inputCodec];\n  }\n\n  getTypedArray() {\n    // 根据传入的目标编码位数\n    // 选定前端的所需要的保存的二进制数据格式\n    // 完整TypedArray请看文档\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray\n    const typedArrays = {\n      'Int8': Int8Array,\n      'Int16': Int16Array,\n      'Int32': Int32Array,\n      'Float32': Float32Array\n    };\n    if (!typedArrays[this.option.inputCodec]) throw new Error('wrong codec.please input one of these codecs:Int8,Int16,Int32,Float32');\n    return typedArrays[this.option.inputCodec];\n  }\n\n  initAudioContext() {\n    // 初始化音频上下文的东西\n    this.audioCtx = createWebAudioContext();\n    // 控制音量的 GainNode\n    // https://developer.mozilla.org/en-US/docs/Web/API/BaseAudioContext/createGain\n    this.gainNode = this.audioCtx.createGain();\n    this.gainNode.gain.value = 1;\n    this.gainNode.connect(this.audioCtx.destination);\n    this.startTime = this.audioCtx.currentTime;\n    this.analyserNode = this.audioCtx.createAnalyser();\n    this.analyserNode.fftSize = this.option.fftSize;\n  }\n\n  static isTypedArray(data) {\n    // 检测输入的数据是否为 TypedArray 类型或 ArrayBuffer 类型\n    return (data.byteLength \u0026\u0026 data.buffer \u0026\u0026 data.buffer instanceof ArrayBuffer) || data instanceof ArrayBuffer;\n  }\n\n  isSupported(data) {\n    // 数据类型是否支持\n    // 目前支持 ArrayBuffer 或者 TypedArray\n    if (!PCMPlayer.isTypedArray(data)) throw new Error('请传入ArrayBuffer或者任意TypedArray');\n    return true;\n  }\n\n  feed(data) {\n    this.isSupported(data);\n\n    // 获取格式化后的buffer\n    data = this.getFormattedValue(data);\n    // 开始拷贝buffer数据\n    // 新建一个Float32Array的空间\n    const tmp = new Float32Array(this.samples.length + data.length);\n    // console.log(data, this.samples, this.samples.length)\n    // 复制当前的实例的buffer值（历史buff)\n    // 从头（0）开始复制\n    tmp.set(this.samples, 0);\n    // 复制传入的新数据\n    // 从历史buff位置开始\n    tmp.set(data, this.samples.length);\n    // 将新的完整buff数据赋值给samples\n    // interval定时器也会从samples里面播放数据\n    this.samples = tmp;\n    // console.log('this.samples', this.samples)\n  }\n\n  getFormattedValue(data) {\n    if (data instanceof ArrayBuffer) {\n      data = new this.typedArray(data);\n    } else {\n      data = new this.typedArray(data.buffer);\n    }\n\n    let float32 = new Float32Array(data.length);\n\n    for (let i = 0; i \u003c data.length; i++) {\n      // buffer 缓冲区的数据，需要是IEEE754 里32位的线性PCM，范围从-1到+1\n      // 所以对数据进行除法\n      // 除以对应的位数范围，得到-1到+1的数据\n      // float32[i] = data[i] / 0x8000;\n      float32[i] = data[i] / this.convertValue;\n    }\n    return float32;\n  }\n\n  volume(volume) {\n    this.gainNode.gain.value = volume;\n  }\n\n  destroy() {\n    if (this.interval) {\n      clearInterval(this.interval);\n    }\n    this.samples = null;\n    this.audioCtx.close().then();\n    this.audioCtx = null;\n  }\n\n  flush() {\n    if (!this.samples.length) return;\n    const self = this;\n    const bufferSource = this.audioCtx.createBufferSource();\n    if (typeof this.option.onended === 'function') {\n      bufferSource.onended = function (event) {\n        self.option.onended(this, event);\n      };\n    }\n    const length = this.samples.length / this.option.channels;\n    const audioBuffer = this.audioCtx.createBuffer(this.option.channels, length, this.option.sampleRate);\n\n    for (let channel = 0; channel \u003c this.option.channels; channel++) {\n      const audioData = audioBuffer.getChannelData(channel);\n      let offset = channel;\n      let decrement = 50;\n      for (let i = 0; i \u003c length; i++) {\n        audioData[i] = this.samples[offset];\n        /* fadein */\n        if (i \u003c 50) {\n          audioData[i] = (audioData[i] * i) / 50;\n        }\n        /* fadeout*/\n        if (i \u003e= (length - 51)) {\n          audioData[i] = (audioData[i] * decrement--) / 50;\n        }\n        offset += this.option.channels;\n      }\n    }\n\n    if (this.startTime \u003c this.audioCtx.currentTime) {\n      this.startTime = this.audioCtx.currentTime;\n    }\n    // console.log('start vs current ' + this.startTime + ' vs ' + this.audioCtx.currentTime + ' duration: ' + audioBuffer.duration);\n    // console.log('start', this.startTime);\n    // console.log('duration', audioBuffer.duration);\n    bufferSource.buffer = audioBuffer;\n    bufferSource.connect(this.gainNode);\n    bufferSource.connect(this.analyserNode); // bufferSource连接到analyser\n    bufferSource.start(this.startTime);\n    this.option?.onstart(audioBuffer.duration);\n    this.startTime += audioBuffer.duration;\n    this.samples = new Float32Array();\n  }\n\n  async pause() {\n    await this.audioCtx.suspend();\n  }\n\n  async continue() {\n    await this.audioCtx.resume();\n  }\n\n  bindAudioContextEvent() {\n    const self = this;\n    if (typeof self.option.onstatechange === 'function') {\n      this.audioCtx.onstatechange = function (event) {\n        self.audioCtx \u0026\u0026 self.option.onstatechange(this, event, self.audioCtx.state);\n      };\n    }\n  }\n\n}\n\nexport default PCMPlayer;\n```","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/26/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","前端"]},{"id":24,"title":"【OSS】前端直传 oss","created_at":"2024-12-03T09:20:59Z","updated_at":"2025-01-01T17:32:24Z","content":"\u003e 在上传文件时，为了降低后端服务器压力、提高上传速度等。可由前端直接上传至oss。\r\n\u003e \r\n\u003e 当使用 npm 的方式使用 oss sdk 时，build 可能会异常。可以采用 cdn 的方式使用。\r\n\u003e \r\n\u003e Github：[ali-oss](https://github.com/ali-sdk/ali-oss)\r\n\r\n### 实现逻辑\r\n\r\n如果是批量上传，则需控制上传队列，单个依次执行上传。\r\n\r\n单个文件上传简单逻辑如下：\r\n\r\n1. 获取 oss config\r\n2. 初始化 oss sdk\r\n3. 执行分片上传\r\n   - 这里不论文件大小都采用分片上传的方式，目的是为了简化，统一逻辑。\r\n   - 可针对不同文件指定不同的分片数量（例如：文件小于1MB则分1片）\r\n4. 上传成功后上报 oss path\r\n\r\n### 异常处理\r\n\r\n1. 初始化 oss sdk 需要有 token，由于token直接输出至前端，出于安全考虑 token 必须设置有效期，例如 5 分钟。因此客户端需 在 token 过期之前，提前刷新 token。防止 token 过期导致上传失败。\r\n   - 为什么 5 分钟有效期还不够用？客户端网络不可控\r\n2. 在进行分片上传时，如果上传失败，可设置自动重试。重试次数可根据业务自定。\r\n   - 断点续传？可根据业务自行实现。\r\n\r\n### 能力扩展\r\n\r\n1. 上传速度\r\n   - 上传开始前 记录当前时间为开始时间\r\n   - 通过上传的 progress 回调。可以获得上传进度，进而可以获取已上传的文件大小。如果以此刻为结束时间的话，那么就可大约计算出上传速度\r\n   - 由于 progress 回调频率不够高，如果需要更高频率显示，可自行实现加速逻辑。比如在一次 progress 回调中计算多次结果。\r\n2. 单文件上传进度\r\n   - 通过 progress 回调根据已上传文件大小，计算得出当前上传进度。\r\n3. 整体上传任务进度\r\n   - 如果需要显示批量的进度，则可在每个文件上传后或者每个文件的 progress 回调（更精细的进度显示）中计算。 \r\n4. 失败重试\r\n   - 在上传失败时可设置自动重试逻辑。超过最大重试次数则最终上传失败。\r\n5. 针对不同文件设置不同分片\r\n    - 合理的分片能够更好的利用带宽，增加上传速度。\r\n    - 同域名下的浏览器并发限制为6个（不同浏览器，不同版本可能限制存在差异，主要目的是需要合理的限制并发数）\r\n    - 根据文件大小，以及并发数量，计算出分片数量以及每片大小。\r\n6. 使用加速域名\r\n   - 如果客户端由于地域原因导致上传慢或者失败。可在上传失败时启用加速域名进行加速上传（修改oss config）。\r\n7. 文件检查\r\n   - 在上传之前可简单进行文件类型，大小等检查。如果不符合业务则直接给出提示即可。\r\n\r\n### 代码实现\r\n\r\n- refreshSTSTokenInterval 可根据业务情况进行修改。\r\n- calcPart 可根据业务情况自行实现。\r\n\r\n```javascript\r\nlet client;\r\n\r\nconst uploadConfig = {\r\n  fileList: [],\r\n  params: new Map(),\r\n  data: {},\r\n};\r\n\r\nconst multipartUpload = (file) =\u003e {\r\n  return new Promise(async (resolve, reject) =\u003e {\r\n    const res = await getOssConfig();\r\n\r\n    const startTime = Date.now();\r\n\r\n    client = new OSS({\r\n      ...getStsConfig(uploadConfig.data.sts_config),\r\n      refreshSTSToken: async () =\u003e {\r\n        const info = await getOssConfig();\r\n        return {\r\n          accessKeyId: info.accessKeyId,\r\n          accessKeySecret: info.accessKeySecret,\r\n          stsToken: info.stsToken,\r\n        };\r\n      },\r\n      refreshSTSTokenInterval: interval * 60 * 1000,\r\n    });\r\n\r\n    client\r\n      .multipartUpload(dir, file.file, {\r\n        progress: (p) =\u003e {\r\n          const costTime = (Date.now() - startTime) / 1000;\r\n          const uploadedSize = ((file.file?.size || 0) * p) / 1024 / 1024;\r\n          const fileSpeed = (uploadedSize / costTime).toFixed(2);\r\n\r\n          console.table({\r\n            '0-name': file.name,\r\n            '1-fileSize': (file.file?.size || 0) / 1024 / 1024 + 'M',\r\n            '2-progress': p * 100 + '%',\r\n            '3-costTime': costTime + 's',\r\n            '4-uploadedSize': uploadedSize + 'M',\r\n            '5-fileSpeed': fileSpeed + 'M/s',\r\n            '6-partSize': calcPart(file.file?.size || 0).partSize / 1024 / 1024 + 'M',\r\n          });\r\n\r\n          uploadConfig.speedMap[file.name] = fileSpeed;\r\n        },\r\n        ...calcPart(file.file?.size || 0),\r\n      })\r\n      .then((res) =\u003e {\r\n        uploadConfig.retryMap[file.name] = 0;\r\n        delete uploadConfig.speedMap[file.name];\r\n        resolve(res);\r\n      })\r\n      .catch(async (err) =\u003e {\r\n        if (err?.message?.includes('expired') \u0026\u0026 uploadConfig.retryMap[file.name] \u003c 3) {\r\n          try {\r\n            uploadConfig.retryMap[file.name] += 1;\r\n            uploadConfig.data = await getOssConfig();\r\n            resolve(await multipartUpload(file));\r\n          } catch (e) {\r\n            reject(e);\r\n          }\r\n        } else {\r\n          uploadConfig.retryMap[file.name] = 0;\r\n          reject(err?.message || err?.name);\r\n        }\r\n      });\r\n  });\r\n};\r\n\r\nfunction calcPart(size) {\r\n  const mbSize = size / 1024 / 1024;\r\n\r\n  const config = {\r\n    parallel: 6,\r\n    partSize: size,\r\n  };\r\n\r\n  if (mbSize \u003e 12 \u0026\u0026 mbSize \u003c= 50) {\r\n    config.partSize = Math.ceil(mbSize / 6) * 1024 * 1024;\r\n  }\r\n\r\n  if (mbSize \u003e 50 \u0026\u0026 mbSize \u003c= 100) {\r\n    config.partSize = Math.ceil(mbSize / 12) * 1024 * 1024;\r\n  }\r\n\r\n  if (mbSize \u003e 100) {\r\n    config.partSize = Math.ceil(mbSize / 18) * 1024 * 1024;\r\n  }\r\n\r\n  return config;\r\n}\r\n```\r\n","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/24/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","前端"]},{"id":23,"title":"【更新提醒】Web 实现更新提醒","created_at":"2024-11-26T09:54:21Z","updated_at":"2025-01-01T17:32:35Z","content":"\u003e 在web项目日常更新中经常会遇到，代码更新后用户无感知。导致功能异常或者体验不到新功能。\r\n\u003e\r\n\u003e 因此需要更新提醒机制来主动告知用户，系统有更新需要重新加载。\r\n\u003e\r\n\u003e 以下方案暂不考虑轮询引起的压力问题。\r\n\r\n**基本原理：请求远端标记与当前标记做判断，不一致则更新。**\r\n\r\n### 方案一：请求静态文件\r\n\r\n- 在 vue，react 等项目打包完成之后会生成静态js文件。\r\n- js文件名称格式一般为 name+hash.ext，因此可以利用hash来进行判断是否有更新。\r\n- 轮询请求入口html文件。利用正则获取 例如app_hash.js中的hash值，与当前文件中的hash值做比对，如果一致说明无更新，如果不一致给出更新提醒。\r\n\r\n#### 优势\r\n\r\n- 纯依赖前端，快\r\n- 无需进行环境区分，直接请求当前环境文件即可\r\n\r\n#### 不足\r\n\r\n- 无法进行更精细化管理。只要hash不一致就会给出提醒\r\n- 更新后 hash 如果未发生变化，则会视为无更新\r\n\r\n### 方案二：请求约定文件\r\n\r\n- 在打包完成后，在固定位置以及html中生成更新标记文件（更新标记的生成可由自动化脚本完成，更新标记可视情况决定是否需要），更新标记需包含以下内容\r\n    - 标识：版本号、commit id或其他\r\n    - 环境：dev、pro或其他\r\n- 轮询请求更新标记，按照环境获取对应的标识与入口html中的标识来进行判断是否需要触发更新。\r\n\r\n#### 优势\r\n\r\n- 解决方案一的不足\r\n- 不受项目限制，可按约定全项目通用\r\n\r\n#### 不足\r\n\r\n- 更新标记生成需要额外成本\r\n\r\n### 注意\r\n\r\n- 在请求静态文件或者更新标记时 GET 请求会有缓存，导致文件内容不更新\r\n    - 可在请求url后增加 _t 参数，参数值为时间戳\r\n    - 更换 POST 请求\r\n- 部署方式不同可能会导致异常\r\n    - 部署方式一：（入口html，静态资源）-\u003e 服务器。一起更新则无问题。\r\n    - 部署方式二：（静态资源）-\u003e oss -\u003e (入口html) -\u003e 服务器。\r\n        - 方案一无问题\r\n        - 方案二则会发生：触发了更新提醒，但是刷新后依旧显示旧页面的问题。原因是因为静态资源更新时入口文件并为更新，此时如果刷新页面，则还是旧版本入口文件。因此需要增加逻辑判断，当入口文件中的标识与更新标记文件中的标识一致时才会触发更新。\r\n","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/23/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","前端"]},{"id":21,"title":"【Vue】Vue3 重置组件状态","created_at":"2024-11-22T03:32:59Z","updated_at":"2024-11-22T03:33:21Z","content":"\u003e 在某些场景下，例如表单提交，经常会需要重置表单状态。可以通过以下的方式进行组件状态优雅重置。\r\n\r\n### xxx写法\r\n\r\n```vue\r\n\r\n\u003ctemplate\u003e\r\n  \u003cdiv\u003e\r\n    \u003cdiv\u003e{{ state.name }} - {{ state.age }}\u003c/div\u003e\r\n    \u003cdiv @click=\"resetState\"\u003ereset ref\u003c/div\u003e\r\n  \u003c/div\u003e\r\n\u003c/template\u003e\r\n\r\n\u003cscript setup\u003e\r\n  import { reactive } from 'vue';\r\n\r\n  const state = reactive({\r\n    name: 1,\r\n    age: 2,\r\n  });\r\n\r\n  function resetState() {\r\n    state.name = 1;\r\n    state.age = 2;\r\n  }\r\n\u003c/script\u003e\r\n```\r\n\r\n### Hook 封装\r\n\r\n```javascript\r\nimport { ref, reactive } from 'vue';\r\n\r\nfunction clone(value) {\r\n  return JSON.parse(JSON.stringify(value));\r\n}\r\n\r\nexport function useResettableRef(value) {\r\n  const initialValue = clone(value);\r\n  const state = ref(value);\r\n\r\n  const reset = () =\u003e {\r\n    state.value = clone(initialValue);\r\n  }\r\n\r\n  return [state, reset];\r\n}\r\n\r\nexport function useResettableReactive(value) {\r\n  const state = reactive(clone(value));\r\n\r\n  const reset = () =\u003e {\r\n    Object.keys(state).forEach((key) =\u003e delete state[key]);\r\n    Object.assign(state, clone(value));\r\n  }\r\n\r\n  return [state, reset];\r\n}\r\n```\r\n\r\n### Hook 使用\r\n\r\n```vue\r\n\r\n\u003ctemplate\u003e\r\n  \u003cdiv\u003e\r\n    \u003cdiv\u003eref：{{ refState.name }} - {{ refState.age }}\u003c/div\u003e\r\n    \u003cdiv @click=\"resetRefState\"\u003ereset ref\u003c/div\u003e\r\n\r\n    \u003cdiv\u003ereactive：{{ reactiveState.name }} - {{ reactiveState.age }}\u003c/div\u003e\r\n    \u003cdiv @click=\"resetReactiveState\"\u003ereset ref\u003c/div\u003e\r\n  \u003c/div\u003e\r\n\u003c/template\u003e\r\n\r\n\u003cscript setup\u003e\r\n  import { useResettableRef, useResettableReactive } from '@/hooks/index.js';\r\n\r\n  const [refState, resetRefState] = useResettableRef({\r\n    name: 1,\r\n    age: 2\r\n  });\r\n\r\n  const [reactiveState, resetReactiveState] = useResettableReactive({\r\n    name: 1,\r\n    age: 2\r\n  });\r\n\u003c/script\u003e\r\n```\r\n","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/21/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","前端","vue"]},{"id":19,"title":"【Wasm】SharedArrayBuffer(SAB) is not defined","created_at":"2024-11-18T10:16:31Z","updated_at":"2024-11-18T10:16:46Z","content":"### 背景\r\n\r\nSharedArrayBuffer 是 JavaScript 中一种特殊的对象类型，用于在多个 Web Workers 或主线程之间共享内存。它与普通的 ArrayBuffer\r\n类似，但 可以在多个线程中同时访问和修改。这种功能对于需要高性能并发处理的场景非常有用，比如实时数据处理、游戏开发、音视频处理等。\r\n\r\n\u003e 2017.7月（Chrome 60）引入 SharedArrayBuffer。\r\n\u003e\r\n\u003e 2021.7月（Chrome 92）限制 SharedArrayBuffer 只能在 cross-origin isolated 页面使用。（Spectre 漏洞）\r\n\r\n### 解决方案\r\n\r\n##### 一、不启用 SharedArrayBuffer\r\n\r\n##### 二、 在 HTTP 响应头中添加以下两个安全标头：\r\n\r\n1. Cross-Origin-Opener-Policy (COOP):\r\n    - 将页面与其他来源的窗口隔离开来。\r\n    - 推荐值：same-origin。\r\n2. Cross-Origin-Embedder-Policy (COEP):\r\n    - 确保页面中加载的资源具备同源性或具有适当的跨源授权。\r\n    - 推荐值：require-corp。\r\n\r\n示例配置：\r\n\r\n```\r\nCross-Origin-Opener-Policy: same-origin\r\nCross-Origin-Embedder-Policy: require-corp\r\n```\r\n\r\n##### 三、Chrome Origin Trials\r\n\r\n申请地址：[Trial for SharedArrayBuffers in non-isolated pages on Desktop platforms](https://developer.chrome.com/origintrials/#/view_trial/303992974847508481)\r\n\r\n### 参考资料\r\n\r\n- [关于 SharedArrayBuffer spectre 攻击的讨论](https://github.com/tc39/security/issues/3)\r\n- [使用 SharedArrayBuffer 进行 Spectre 攻击的原理](https://www.giantbranch.cn/2018/01/09/腾讯玄武实验室检测浏览器spectre的原理)\r\n- [使用 COOP 和 COEP 将网站设置为“跨源隔离”](https://web.dev/articles/coop-coep?hl=zh-cn)\r\n- [A year with Spectre: a V8 perspective](https://v8.dev/blog/spectre)\r\n","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/19/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","前端"]},{"id":17,"title":"【React hack】在 React 中模拟触发输入","created_at":"2024-11-11T15:53:16Z","updated_at":"2025-01-01T17:32:48Z","content":"### 在 React 中进行模拟触发输入\r\n\r\n\u003e 参考：https://github.com/facebook/react/issues/11488\r\n\r\n在自动化测试或在线调试React项目中，会遇到直接修改input的valut值UI变化，但是内部state并没有修改的情况。因此需要hack方法来解决：\r\n\r\n```javascript\r\nlet input = document.querySelector('xxx');\r\nlet lastValue = input.value;\r\ninput.value = 'xxx';\r\nlet event = new Event('input', {bubbles: true});\r\nevent.simulated = true;\r\nlet tracker = input._valueTracker;\r\nif (tracker) {\r\n  tracker.setValue(lastValue)\r\n}\r\ninput.dispatchEvent(event);\r\nconst enterKeyEvent = new KeyboardEvent('keypress', {\r\n  key: 'Enter',\r\n  keyCode: 13,\r\n  code: 'Enter',\r\n  which: 13,\r\n  bubbles: true,\r\n});\r\ninput.dispatchEvent(enterKeyEvent);\r\n```\r\n\r\n```javascript\r\nconst fileInput = document.querySelector('input[type=\"file\"]');\r\n\r\nasync function simulateRemoteFileSelection(url) {\r\n  const response = await fetch(url);\r\n  const blob = await response.blob();\r\n\r\n  const file = new File([blob], \"file.mp4\", {\r\n    type: blob.type,\r\n  });\r\n\r\n  const dataTransfer = new DataTransfer();\r\n  dataTransfer.items.add(file);\r\n\r\n  fileInput.files = dataTransfer.files;\r\n\r\n  const event = new Event('change', {bubbles: true});\r\n  fileInput.dispatchEvent(event);\r\n}\r\n\r\nsimulateRemoteFileSelection('xxxx');\r\n```","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/17/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","前端","react"]},{"id":15,"title":"【Vue router】动态路由匹配下的权限处理","created_at":"2024-11-06T08:36:19Z","updated_at":"2024-11-11T15:53:40Z","content":"### 基于路由的访问控制（Route-Based Access Control）\r\n\r\n\u003e 前端 routes.js 中定义完整路由，每个路由 meta 信息中的 role 来标识权限值。登陆之后通过用户的权限过滤完整路由，最终生成用户路由。\r\n\r\n#### 特点\r\n\r\n- 集中管理：在 routes.js 中集中管理所有路由及其权限信息。\r\n- 动态生成用户路由：用户登录时根据权限动态过滤路由，生成符合用户权限的路由配置。\r\n- 基于角色的访问控制：通过 meta.role 来管理和控制角色权限，可以支持多角色的访问权限需求。\r\n\r\n#### 流程\r\n\r\n- 定义完整路由表：在 routes.js 中定义所有路由和对应的 meta.role 信息。\r\n- 用户登录后获取权限：用户登录后，获取用户权限信息（如角色、权限 ID 等）。\r\n- 动态过滤路由：根据用户的权限信息过滤完整路由表，生成仅包含用户有权限访问的路由。\r\n- 动态注入路由表：将过滤后的路由表动态注入到路由配置中。\r\n\r\n### 业务背景\r\n\r\n\u003e 基于上述流程。在实际业务中，如果用户进入无匹配路由页面时（**实际路由确实不存在、权限不足导致无匹配路由**），会重定向至 404\r\n\u003e 页面（此动作由 vue-router 的 路由匹配完成）。\r\n\u003e\r\n\u003e [捕获所有路由或 404 Not found 路由](https://router.vuejs.org/zh/guide/essentials/dynamic-matching.html#捕获所有路由或-404-Not-found-路由)\r\n\r\n```javascript\r\n// 需在用户路由表生成后添加\r\nconst NOT_FOUND_ROUTE = {\r\n  name: 'NotFound',\r\n  path: '/:pathMatch(.*)*',\r\n  redirect: '/404',\r\n};\r\n```\r\n\r\n#### 问题\r\n\r\n通过以上操作，一旦匹配不到路由就会重定向至 404 页面。此时无法区分进入 404 的原因到底是因为 **实际路由不存在** 还是 **权限不足\r\n**\r\n**。\r\n\r\n#### 解决方案\r\n\r\n为了解决上述问题可以修改 **NotFound** 中的 **redirect** 如下:\r\n\r\n```javascript\r\nconst NOT_FOUND_ROUTE = {\r\n  name: 'NotFound',\r\n  path: '/:pathMatch(.*)*',\r\n  redirect: (to) =\u003e {\r\n    console.log(to);\r\n    return '/404';\r\n  },\r\n};\r\n```\r\n\r\n在将 **redirect** 配置项设置为方法后：\r\n\r\n1. 参数 **to**：可以访问跳转前的路由信息，帮助了解用户试图访问的路径。\r\n2. 方法 **router.getRoutes**：可以获取所有已注册的路由表，便于进行权限和路径验证。\r\n\r\n在此基础上，需要实现以下两重判断：\r\n\r\n1. 路径存在性判断：利用 **to.path** 检查目标路径是否在路由表中。\r\n    - 若路径存在：说明目标路径已注册。（可忽略。~~进一步判断用户是否有权限访问。此时，如果用户跳转到了 **404**\r\n      页面，通常意味着当前用户没有访问该路径的权限。~~）\r\n    - 若路径不存在：说明路由没有进行注册。\r\n2. 增加标记：可以通过修改 **to.query** 或其他方式，标记跳转到 **404** 的原因，便于前端展示不同的提示内容。\r\n\r\n通过这种判断，能够精准地确认跳转至 **404** 的原因，进一步支持前端展示出更具体的权限提示信息。\r\n","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/15/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","前端"]},{"id":14,"title":"【秒级】获取视频时刻图","created_at":"2024-10-28T08:58:43Z","updated_at":"2024-11-04T01:30:31Z","content":"\u003e 在获取视频任意时刻的截图时，通常大多数的做法都是\r\n\u003e - 通过视频播放，canvas绘制\r\n\u003e - 借助ffmpeg\r\n\u003e \r\n\u003e 除此之外，还有另外一种方式：URI Queries\r\n\r\n### 使用方式\r\n\r\n只需要在url后面带上#t=xx（秒）即可，如果是本地文件的话，上传之后需要拿到blobUrl\r\n\r\n```html\r\n\u003c!-- 网络地址 --\u003e\r\n\u003cdiv\u003e\r\n  \u003cvideo src=\"https://www.w3school.com.cn/i/video/shanghai.mp4#t=1.2\"\u003e\u003c/video\u003e\r\n  \u003cvideo src=\"https://www.w3school.com.cn/i/video/shanghai.mp4#t=2.2\"\u003e\u003c/video\u003e\r\n  \u003cvideo src=\"https://www.w3school.com.cn/i/video/shanghai.mp4#t=3.5\"\u003e\u003c/video\u003e\r\n\u003c/div\u003e\r\n\r\n\u003c!-- 本地地址 --\u003e\r\n\u003cdiv\u003e\r\n  \u003cvideo src=\"blob:file:///123a3041-4ab9-4db8-adb7-56c46f3b156e#t=1.2\"\u003e\u003c/video\u003e\r\n  \u003cvideo src=\"blob:file:///123a3041-4ab9-4db8-adb7-56c46f3b156e#t=2.2\"\u003e\u003c/video\u003e\r\n  \u003cvideo src=\"blob:file:///123a3041-4ab9-4db8-adb7-56c46f3b156e#t=3.5\"\u003e\u003c/video\u003e\r\n\u003c/div\u003e\r\n\r\n\u003c!-- 获取blob url --\u003e\r\n\u003cscript\u003e\r\n  fetch('https://www.w3school.com.cn/i/video/shanghai.mp4').then(res =\u003e res.blob()).then(blob =\u003e {\r\n    const blobUrl = URL.createObjectURL(blob);\r\n    console.log(blobUrl);\r\n  })\r\n\u003c/script\u003e\r\n```\r\n\r\n到此就可以渲染出指定时刻的图片。就这？是的，没错，就这。\r\n\r\n### 优点\r\n\r\n- 快\r\n- 简单\r\n\r\n### 缺点\r\n\r\n- 每一张图实际是一个video，会导致资源重复请求，视频文件过大，图片过多，网络压力较大。\r\n- 请求网络地址进而转换成本地地址，虽然可以解决并发导致的网络压力，但是如果文件过大，首次加载依旧需要消耗比较长的时间。\r\n\r\n### 总结\r\n\r\n具体使用什么方式，还需根据业务需求决定。\r\n\r\n\u003e 参考文档：https://www.w3.org/TR/media-frags/#media-fragment-syntax\r\n","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/14/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","前端"]},{"id":11,"title":"【Plugin】Vite Javascript obfuscator","created_at":"2024-10-25T03:29:18Z","updated_at":"2025-04-17T01:22:23Z","content":"# 适用于Vite环境的JavaScript混淆插件\n\n\u003e仓库地址：[vite-plugin-bundle-obfuscator](https://github.com/z0ffy/vite-plugin-bundle-obfuscator)\n\n## ⭐️ 特性\n\n- [x] ⚡ 支持 Vite 项目中的 JavaScript 混淆。\n- [x] 🚀 多线程支持，以获得更好的性能。\n- [x] ⚙️ 可定制的混淆器选项，以满足您的需求。\n- [x] 🛡️ 自动排除 node_modules。\n- [x] 📦 支持 node_modules 拆分块。\n\n## ⚠️ 注意\n\n- 如果打包过程中出现内存溢出。修改打包命令为：cross-env NODE_OPTIONS=--max-old-space-size=8192 VITE_CJS_IGNORE_WARNING=true vite build，其中 max-old-space-size 根据机器配置自行设置。\n- 在设置 node_modules 分包时，请把准确的包名前置。例如：[\"vue-router\", \"vue\"]，\"vue\"可以同时匹配到 vue 以及 vue-router。\n\n## 🌐 在线示例\n\n✦ [Vite - Vanilla](https://stackblitz.com/edit/vitejs-vite-zsytij?file=vite.config.js)\n✦ [Vite - Vue](https://stackblitz.com/edit/vitejs-vite-ywho91?file=vite.config.js)\n✦ [Vite - React](https://stackblitz.com/edit/vitejs-vite-wyeur4?file=vite.config.js)\n✦ [Vite - PReact](https://stackblitz.com/edit/vitejs-vite-oujmks?file=vite.config.js)\n✦ [Vite - lit](https://stackblitz.com/edit/vitejs-vite-ru4gws?file=vite.config.js)\n✦ [Vite - Svelte](https://stackblitz.com/edit/vitejs-vite-fthdtu?file=vite.config.js)\n✦ [Vite - Solid](https://stackblitz.com/edit/vitejs-vite-dcx3eh?file=vite.config.js)\n✦ [Vite - Qwik](https://stackblitz.com/edit/vitejs-vite-i2bjvq?file=vite.config.js)\n✦ ...\n\n\n## 📦 安装\n\n```bash\n# 使用npm\nnpm install vite-plugin-bundle-obfuscator -D\n\n# 使用pnpm\npnpm add vite-plugin-bundle-obfuscator -D\n\n# 使用yarn\nyarn add vite-plugin-bundle-obfuscator -D\n```\n\n## 👨‍💻 使用\n\n1. 使用您首选的软件包管理器安装插件。\n2. 在vite.config.js中注册插件。\n3. 自定义混淆器配置或使用默认选项。\n\n示例:\n\n```javascript\nimport vitePluginBundleObfuscator from 'vite-plugin-bundle-obfuscator';\n\nconst defaultObfuscatorConfig = {\n  excludes: [],\n  enable: true,\n  log: true,\n  autoExcludeNodeModules: false,\n  threadPool: false,\n  options: {\n    compact: true,\n    controlFlowFlattening: true,\n    controlFlowFlatteningThreshold: 1,\n    deadCodeInjection: false,\n    debugProtection: false,\n    debugProtectionInterval: 0,\n    disableConsoleOutput: false,\n    identifierNamesGenerator: 'hexadecimal',\n    log: false,\n    numbersToExpressions: false,\n    renameGlobals: false,\n    selfDefending: true,\n    simplify: true,\n    splitStrings: false,\n    ignoreImports: true,\n    stringArray: true,\n    stringArrayCallsTransform: true,\n    stringArrayCallsTransformThreshold: 0.5,\n    stringArrayEncoding: [],\n    stringArrayIndexShift: true,\n    stringArrayRotate: true,\n    stringArrayShuffle: true,\n    stringArrayWrappersCount: 1,\n    stringArrayWrappersChainedCalls: true,\n    stringArrayWrappersParametersMaxCount: 2,\n    stringArrayWrappersType: 'variable',\n    stringArrayThreshold: 0.75,\n    unicodeEscapeSequence: false,\n  }\n};\n\nexport default {\n  plugins: [\n    // vitePluginBundleObfuscator()\n    vitePluginBundleObfuscator(defaultObfuscatorConfig)\n  ]\n};\n```\n","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/11/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","前端"]}],"tag":"前端"},"__N_SSG":true},"page":"/tag/[id]","query":{"id":"前端"},"buildId":"vbNnOTB9J9odoHtpOLgIq","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>