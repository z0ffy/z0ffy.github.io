{"pageProps":{"posts":[{"id":21,"title":"ã€Vueã€‘Vue3 é‡ç½®ç»„ä»¶çŠ¶æ€","created_at":"2024-11-22T03:32:59Z","updated_at":"2024-11-22T03:33:21Z","content":"> åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä¾‹å¦‚è¡¨å•æäº¤ï¼Œç»å¸¸ä¼šéœ€è¦é‡ç½®è¡¨å•çŠ¶æ€ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼è¿›è¡Œç»„ä»¶çŠ¶æ€ä¼˜é›…é‡ç½®ã€‚\r\n\r\n### xxxå†™æ³•\r\n\r\n```vue\r\n\r\n<template>\r\n  <div>\r\n    <div>{{ state.name }} - {{ state.age }}</div>\r\n    <div @click=\"resetState\">reset ref</div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n  import { reactive } from 'vue';\r\n\r\n  const state = reactive({\r\n    name: 1,\r\n    age: 2,\r\n  });\r\n\r\n  function resetState() {\r\n    state.name = 1;\r\n    state.age = 2;\r\n  }\r\n</script>\r\n```\r\n\r\n### Hook å°è£…\r\n\r\n```javascript\r\nimport { ref, reactive } from 'vue';\r\n\r\nfunction clone(value) {\r\n  return JSON.parse(JSON.stringify(value));\r\n}\r\n\r\nexport function useResettableRef(value) {\r\n  const initialValue = clone(value);\r\n  const state = ref(value);\r\n\r\n  const reset = () => {\r\n    state.value = clone(initialValue);\r\n  }\r\n\r\n  return [state, reset];\r\n}\r\n\r\nexport function useResettableReactive(value) {\r\n  const state = reactive(clone(value));\r\n\r\n  const reset = () => {\r\n    Object.keys(state).forEach((key) => delete state[key]);\r\n    Object.assign(state, clone(value));\r\n  }\r\n\r\n  return [state, reset];\r\n}\r\n```\r\n\r\n### Hook ä½¿ç”¨\r\n\r\n```vue\r\n\r\n<template>\r\n  <div>\r\n    <div>refï¼š{{ refState.name }} - {{ refState.age }}</div>\r\n    <div @click=\"resetRefState\">reset ref</div>\r\n\r\n    <div>reactiveï¼š{{ reactiveState.name }} - {{ reactiveState.age }}</div>\r\n    <div @click=\"resetReactiveState\">reset ref</div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n  import { useResettableRef, useResettableReactive } from '@/hooks/index.js';\r\n\r\n  const [refState, resetRefState] = useResettableRef({\r\n    name: 1,\r\n    age: 2\r\n  });\r\n\r\n  const [reactiveState, resetReactiveState] = useResettableReactive({\r\n    name: 1,\r\n    age: 2\r\n  });\r\n</script>\r\n```\r\n","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/21/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","å‰ç«¯","vue"]},{"id":19,"title":"ã€Wasmã€‘SharedArrayBuffer(SAB) is not defined","created_at":"2024-11-18T10:16:31Z","updated_at":"2024-11-18T10:16:46Z","content":"### èƒŒæ™¯\r\n\r\nSharedArrayBuffer æ˜¯ JavaScript ä¸­ä¸€ç§ç‰¹æ®Šçš„å¯¹è±¡ç±»å‹ï¼Œç”¨äºåœ¨å¤šä¸ª Web Workers æˆ–ä¸»çº¿ç¨‹ä¹‹é—´å…±äº«å†…å­˜ã€‚å®ƒä¸æ™®é€šçš„ ArrayBuffer\r\nç±»ä¼¼ï¼Œä½† å¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶è®¿é—®å’Œä¿®æ”¹ã€‚è¿™ç§åŠŸèƒ½å¯¹äºéœ€è¦é«˜æ€§èƒ½å¹¶å‘å¤„ç†çš„åœºæ™¯éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚å®æ—¶æ•°æ®å¤„ç†ã€æ¸¸æˆå¼€å‘ã€éŸ³è§†é¢‘å¤„ç†ç­‰ã€‚\r\n\r\n> 2017.7æœˆï¼ˆChrome 60ï¼‰å¼•å…¥ SharedArrayBufferã€‚\r\n>\r\n> 2021.7æœˆï¼ˆChrome 92ï¼‰é™åˆ¶ SharedArrayBuffer åªèƒ½åœ¨ cross-origin isolated é¡µé¢ä½¿ç”¨ã€‚ï¼ˆSpectre æ¼æ´ï¼‰\r\n\r\n### è§£å†³æ–¹æ¡ˆ\r\n\r\n##### ä¸€ã€ä¸å¯ç”¨ SharedArrayBuffer\r\n\r\n##### äºŒã€ åœ¨ HTTP å“åº”å¤´ä¸­æ·»åŠ ä»¥ä¸‹ä¸¤ä¸ªå®‰å…¨æ ‡å¤´ï¼š\r\n\r\n1. Cross-Origin-Opener-Policy (COOP):\r\n    - å°†é¡µé¢ä¸å…¶ä»–æ¥æºçš„çª—å£éš”ç¦»å¼€æ¥ã€‚\r\n    - æ¨èå€¼ï¼šsame-originã€‚\r\n2. Cross-Origin-Embedder-Policy (COEP):\r\n    - ç¡®ä¿é¡µé¢ä¸­åŠ è½½çš„èµ„æºå…·å¤‡åŒæºæ€§æˆ–å…·æœ‰é€‚å½“çš„è·¨æºæˆæƒã€‚\r\n    - æ¨èå€¼ï¼šrequire-corpã€‚\r\n\r\nç¤ºä¾‹é…ç½®ï¼š\r\n\r\n```\r\nCross-Origin-Opener-Policy: same-origin\r\nCross-Origin-Embedder-Policy: require-corp\r\n```\r\n\r\n##### ä¸‰ã€Chrome Origin Trials\r\n\r\nç”³è¯·åœ°å€ï¼š[Trial for SharedArrayBuffers in non-isolated pages on Desktop platforms](https://developer.chrome.com/origintrials/#/view_trial/303992974847508481)\r\n\r\n### å‚è€ƒèµ„æ–™\r\n\r\n- [å…³äº SharedArrayBuffer spectre æ”»å‡»çš„è®¨è®º](https://github.com/tc39/security/issues/3)\r\n- [ä½¿ç”¨ SharedArrayBuffer è¿›è¡Œ Spectre æ”»å‡»çš„åŸç†](https://www.giantbranch.cn/2018/01/09/è…¾è®¯ç„æ­¦å®éªŒå®¤æ£€æµ‹æµè§ˆå™¨spectreçš„åŸç†)\r\n- [ä½¿ç”¨ COOP å’Œ COEP å°†ç½‘ç«™è®¾ç½®ä¸ºâ€œè·¨æºéš”ç¦»â€](https://web.dev/articles/coop-coep?hl=zh-cn)\r\n- [A year with Spectre: a V8 perspective](https://v8.dev/blog/spectre)\r\n","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/19/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","å‰ç«¯"]},{"id":17,"title":"ã€React hackã€‘åœ¨Reactä¸­æ¨¡æ‹Ÿè§¦å‘è¾“å…¥","created_at":"2024-11-11T15:53:16Z","updated_at":"2024-11-22T03:52:09Z","content":"### åœ¨ React ä¸­è¿›è¡Œæ¨¡æ‹Ÿè§¦å‘è¾“å…¥\r\n\r\n> å‚è€ƒï¼šhttps://github.com/facebook/react/issues/11488\r\n\r\nåœ¨è‡ªåŠ¨åŒ–æµ‹è¯•æˆ–åœ¨çº¿è°ƒè¯•Reacté¡¹ç›®ä¸­ï¼Œä¼šé‡åˆ°ç›´æ¥ä¿®æ”¹inputçš„valutå€¼UIå˜åŒ–ï¼Œä½†æ˜¯å†…éƒ¨stateå¹¶æ²¡æœ‰ä¿®æ”¹çš„æƒ…å†µã€‚å› æ­¤éœ€è¦hackæ–¹æ³•æ¥è§£å†³ï¼š\r\n\r\n```javascript\r\nlet input = document.querySelector('xxx');\r\nlet lastValue = input.value;\r\ninput.value = 'xxx';\r\nlet event = new Event('input', {bubbles: true});\r\nevent.simulated = true;\r\nlet tracker = input._valueTracker;\r\nif (tracker) {\r\n  tracker.setValue(lastValue)\r\n}\r\ninput.dispatchEvent(event);\r\nconst enterKeyEvent = new KeyboardEvent('keypress', {\r\n  key: 'Enter',\r\n  keyCode: 13,\r\n  code: 'Enter',\r\n  which: 13,\r\n  bubbles: true,\r\n});\r\ninput.dispatchEvent(enterKeyEvent);\r\n```\r\n\r\n```javascript\r\nconst fileInput = document.querySelector('input[type=\"file\"]');\r\n\r\nasync function simulateRemoteFileSelection(url) {\r\n  const response = await fetch(url);\r\n  const blob = await response.blob();\r\n\r\n  const file = new File([blob], \"file.mp4\", {\r\n    type: blob.type,\r\n  });\r\n\r\n  const dataTransfer = new DataTransfer();\r\n  dataTransfer.items.add(file);\r\n\r\n  fileInput.files = dataTransfer.files;\r\n\r\n  const event = new Event('change', {bubbles: true});\r\n  fileInput.dispatchEvent(event);\r\n}\r\n\r\nsimulateRemoteFileSelection('xxxx');\r\n```","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/17/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","å‰ç«¯","react"]},{"id":15,"title":"ã€Vue routerã€‘åŠ¨æ€è·¯ç”±åŒ¹é…ä¸‹çš„æƒé™å¤„ç†","created_at":"2024-11-06T08:36:19Z","updated_at":"2024-11-11T15:53:40Z","content":"### åŸºäºè·¯ç”±çš„è®¿é—®æ§åˆ¶ï¼ˆRoute-Based Access Controlï¼‰\r\n\r\n> å‰ç«¯ routes.js ä¸­å®šä¹‰å®Œæ•´è·¯ç”±ï¼Œæ¯ä¸ªè·¯ç”± meta ä¿¡æ¯ä¸­çš„ role æ¥æ ‡è¯†æƒé™å€¼ã€‚ç™»é™†ä¹‹åé€šè¿‡ç”¨æˆ·çš„æƒé™è¿‡æ»¤å®Œæ•´è·¯ç”±ï¼Œæœ€ç»ˆç”Ÿæˆç”¨æˆ·è·¯ç”±ã€‚\r\n\r\n#### ç‰¹ç‚¹\r\n\r\n- é›†ä¸­ç®¡ç†ï¼šåœ¨ routes.js ä¸­é›†ä¸­ç®¡ç†æ‰€æœ‰è·¯ç”±åŠå…¶æƒé™ä¿¡æ¯ã€‚\r\n- åŠ¨æ€ç”Ÿæˆç”¨æˆ·è·¯ç”±ï¼šç”¨æˆ·ç™»å½•æ—¶æ ¹æ®æƒé™åŠ¨æ€è¿‡æ»¤è·¯ç”±ï¼Œç”Ÿæˆç¬¦åˆç”¨æˆ·æƒé™çš„è·¯ç”±é…ç½®ã€‚\r\n- åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼šé€šè¿‡ meta.role æ¥ç®¡ç†å’Œæ§åˆ¶è§’è‰²æƒé™ï¼Œå¯ä»¥æ”¯æŒå¤šè§’è‰²çš„è®¿é—®æƒé™éœ€æ±‚ã€‚\r\n\r\n#### æµç¨‹\r\n\r\n- å®šä¹‰å®Œæ•´è·¯ç”±è¡¨ï¼šåœ¨ routes.js ä¸­å®šä¹‰æ‰€æœ‰è·¯ç”±å’Œå¯¹åº”çš„ meta.role ä¿¡æ¯ã€‚\r\n- ç”¨æˆ·ç™»å½•åè·å–æƒé™ï¼šç”¨æˆ·ç™»å½•åï¼Œè·å–ç”¨æˆ·æƒé™ä¿¡æ¯ï¼ˆå¦‚è§’è‰²ã€æƒé™ ID ç­‰ï¼‰ã€‚\r\n- åŠ¨æ€è¿‡æ»¤è·¯ç”±ï¼šæ ¹æ®ç”¨æˆ·çš„æƒé™ä¿¡æ¯è¿‡æ»¤å®Œæ•´è·¯ç”±è¡¨ï¼Œç”Ÿæˆä»…åŒ…å«ç”¨æˆ·æœ‰æƒé™è®¿é—®çš„è·¯ç”±ã€‚\r\n- åŠ¨æ€æ³¨å…¥è·¯ç”±è¡¨ï¼šå°†è¿‡æ»¤åçš„è·¯ç”±è¡¨åŠ¨æ€æ³¨å…¥åˆ°è·¯ç”±é…ç½®ä¸­ã€‚\r\n\r\n### ä¸šåŠ¡èƒŒæ™¯\r\n\r\n> åŸºäºä¸Šè¿°æµç¨‹ã€‚åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œå¦‚æœç”¨æˆ·è¿›å…¥æ— åŒ¹é…è·¯ç”±é¡µé¢æ—¶ï¼ˆ**å®é™…è·¯ç”±ç¡®å®ä¸å­˜åœ¨ã€æƒé™ä¸è¶³å¯¼è‡´æ— åŒ¹é…è·¯ç”±**ï¼‰ï¼Œä¼šé‡å®šå‘è‡³ 404\r\n> é¡µé¢ï¼ˆæ­¤åŠ¨ä½œç”± vue-router çš„ è·¯ç”±åŒ¹é…å®Œæˆï¼‰ã€‚\r\n>\r\n> [æ•è·æ‰€æœ‰è·¯ç”±æˆ– 404 Not found è·¯ç”±](https://router.vuejs.org/zh/guide/essentials/dynamic-matching.html#æ•è·æ‰€æœ‰è·¯ç”±æˆ–-404-Not-found-è·¯ç”±)\r\n\r\n```javascript\r\n// éœ€åœ¨ç”¨æˆ·è·¯ç”±è¡¨ç”Ÿæˆåæ·»åŠ \r\nconst NOT_FOUND_ROUTE = {\r\n  name: 'NotFound',\r\n  path: '/:pathMatch(.*)*',\r\n  redirect: '/404',\r\n};\r\n```\r\n\r\n#### é—®é¢˜\r\n\r\né€šè¿‡ä»¥ä¸Šæ“ä½œï¼Œä¸€æ—¦åŒ¹é…ä¸åˆ°è·¯ç”±å°±ä¼šé‡å®šå‘è‡³ 404 é¡µé¢ã€‚æ­¤æ—¶æ— æ³•åŒºåˆ†è¿›å…¥ 404 çš„åŸå› åˆ°åº•æ˜¯å› ä¸º **å®é™…è·¯ç”±ä¸å­˜åœ¨** è¿˜æ˜¯ **æƒé™ä¸è¶³\r\n**\r\n**ã€‚\r\n\r\n#### è§£å†³æ–¹æ¡ˆ\r\n\r\nä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜å¯ä»¥ä¿®æ”¹ **NotFound** ä¸­çš„ **redirect** å¦‚ä¸‹:\r\n\r\n```javascript\r\nconst NOT_FOUND_ROUTE = {\r\n  name: 'NotFound',\r\n  path: '/:pathMatch(.*)*',\r\n  redirect: (to) => {\r\n    console.log(to);\r\n    return '/404';\r\n  },\r\n};\r\n```\r\n\r\nåœ¨å°† **redirect** é…ç½®é¡¹è®¾ç½®ä¸ºæ–¹æ³•åï¼š\r\n\r\n1. å‚æ•° **to**ï¼šå¯ä»¥è®¿é—®è·³è½¬å‰çš„è·¯ç”±ä¿¡æ¯ï¼Œå¸®åŠ©äº†è§£ç”¨æˆ·è¯•å›¾è®¿é—®çš„è·¯å¾„ã€‚\r\n2. æ–¹æ³• **router.getRoutes**ï¼šå¯ä»¥è·å–æ‰€æœ‰å·²æ³¨å†Œçš„è·¯ç”±è¡¨ï¼Œä¾¿äºè¿›è¡Œæƒé™å’Œè·¯å¾„éªŒè¯ã€‚\r\n\r\nåœ¨æ­¤åŸºç¡€ä¸Šï¼Œéœ€è¦å®ç°ä»¥ä¸‹ä¸¤é‡åˆ¤æ–­ï¼š\r\n\r\n1. è·¯å¾„å­˜åœ¨æ€§åˆ¤æ–­ï¼šåˆ©ç”¨ **to.path** æ£€æŸ¥ç›®æ ‡è·¯å¾„æ˜¯å¦åœ¨è·¯ç”±è¡¨ä¸­ã€‚\r\n    - è‹¥è·¯å¾„å­˜åœ¨ï¼šè¯´æ˜ç›®æ ‡è·¯å¾„å·²æ³¨å†Œã€‚ï¼ˆå¯å¿½ç•¥ã€‚~~è¿›ä¸€æ­¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è®¿é—®ã€‚æ­¤æ—¶ï¼Œå¦‚æœç”¨æˆ·è·³è½¬åˆ°äº† **404**\r\n      é¡µé¢ï¼Œé€šå¸¸æ„å‘³ç€å½“å‰ç”¨æˆ·æ²¡æœ‰è®¿é—®è¯¥è·¯å¾„çš„æƒé™ã€‚~~ï¼‰\r\n    - è‹¥è·¯å¾„ä¸å­˜åœ¨ï¼šè¯´æ˜è·¯ç”±æ²¡æœ‰è¿›è¡Œæ³¨å†Œã€‚\r\n2. å¢åŠ æ ‡è®°ï¼šå¯ä»¥é€šè¿‡ä¿®æ”¹ **to.query** æˆ–å…¶ä»–æ–¹å¼ï¼Œæ ‡è®°è·³è½¬åˆ° **404** çš„åŸå› ï¼Œä¾¿äºå‰ç«¯å±•ç¤ºä¸åŒçš„æç¤ºå†…å®¹ã€‚\r\n\r\né€šè¿‡è¿™ç§åˆ¤æ–­ï¼Œèƒ½å¤Ÿç²¾å‡†åœ°ç¡®è®¤è·³è½¬è‡³ **404** çš„åŸå› ï¼Œè¿›ä¸€æ­¥æ”¯æŒå‰ç«¯å±•ç¤ºå‡ºæ›´å…·ä½“çš„æƒé™æç¤ºä¿¡æ¯ã€‚\r\n","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/15/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","å‰ç«¯"]},{"id":14,"title":"ã€ç§’çº§ã€‘è·å–è§†é¢‘æ—¶åˆ»å›¾","created_at":"2024-10-28T08:58:43Z","updated_at":"2024-11-04T01:30:31Z","content":"> åœ¨è·å–è§†é¢‘ä»»æ„æ—¶åˆ»çš„æˆªå›¾æ—¶ï¼Œé€šå¸¸å¤§å¤šæ•°çš„åšæ³•éƒ½æ˜¯\r\n> - é€šè¿‡è§†é¢‘æ’­æ”¾ï¼Œcanvasç»˜åˆ¶\r\n> - å€ŸåŠ©ffmpeg\r\n> \r\n> é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§æ–¹å¼ï¼šURI Queries\r\n\r\n### ä½¿ç”¨æ–¹å¼\r\n\r\nåªéœ€è¦åœ¨urlåé¢å¸¦ä¸Š#t=xxï¼ˆç§’ï¼‰å³å¯ï¼Œå¦‚æœæ˜¯æœ¬åœ°æ–‡ä»¶çš„è¯ï¼Œä¸Šä¼ ä¹‹åéœ€è¦æ‹¿åˆ°blobUrl\r\n\r\n```html\r\n<!-- ç½‘ç»œåœ°å€ -->\r\n<div>\r\n  <video src=\"https://www.w3school.com.cn/i/video/shanghai.mp4#t=1.2\"></video>\r\n  <video src=\"https://www.w3school.com.cn/i/video/shanghai.mp4#t=2.2\"></video>\r\n  <video src=\"https://www.w3school.com.cn/i/video/shanghai.mp4#t=3.5\"></video>\r\n</div>\r\n\r\n<!-- æœ¬åœ°åœ°å€ -->\r\n<div>\r\n  <video src=\"blob:file:///123a3041-4ab9-4db8-adb7-56c46f3b156e#t=1.2\"></video>\r\n  <video src=\"blob:file:///123a3041-4ab9-4db8-adb7-56c46f3b156e#t=2.2\"></video>\r\n  <video src=\"blob:file:///123a3041-4ab9-4db8-adb7-56c46f3b156e#t=3.5\"></video>\r\n</div>\r\n\r\n<!-- è·å–blob url -->\r\n<script>\r\n  fetch('https://www.w3school.com.cn/i/video/shanghai.mp4').then(res => res.blob()).then(blob => {\r\n    const blobUrl = URL.createObjectURL(blob);\r\n    console.log(blobUrl);\r\n  })\r\n</script>\r\n```\r\n\r\nåˆ°æ­¤å°±å¯ä»¥æ¸²æŸ“å‡ºæŒ‡å®šæ—¶åˆ»çš„å›¾ç‰‡ã€‚å°±è¿™ï¼Ÿæ˜¯çš„ï¼Œæ²¡é”™ï¼Œå°±è¿™ã€‚\r\n\r\n### ä¼˜ç‚¹\r\n\r\n- å¿«\r\n- ç®€å•\r\n\r\n### ç¼ºç‚¹\r\n\r\n- æ¯ä¸€å¼ å›¾å®é™…æ˜¯ä¸€ä¸ªvideoï¼Œä¼šå¯¼è‡´èµ„æºé‡å¤è¯·æ±‚ï¼Œè§†é¢‘æ–‡ä»¶è¿‡å¤§ï¼Œå›¾ç‰‡è¿‡å¤šï¼Œç½‘ç»œå‹åŠ›è¾ƒå¤§ã€‚\r\n- è¯·æ±‚ç½‘ç»œåœ°å€è¿›è€Œè½¬æ¢æˆæœ¬åœ°åœ°å€ï¼Œè™½ç„¶å¯ä»¥è§£å†³å¹¶å‘å¯¼è‡´çš„ç½‘ç»œå‹åŠ›ï¼Œä½†æ˜¯å¦‚æœæ–‡ä»¶è¿‡å¤§ï¼Œé¦–æ¬¡åŠ è½½ä¾æ—§éœ€è¦æ¶ˆè€—æ¯”è¾ƒé•¿çš„æ—¶é—´ã€‚\r\n\r\n### æ€»ç»“\r\n\r\nå…·ä½“ä½¿ç”¨ä»€ä¹ˆæ–¹å¼ï¼Œè¿˜éœ€æ ¹æ®ä¸šåŠ¡éœ€æ±‚å†³å®šã€‚\r\n\r\n> å‚è€ƒæ–‡æ¡£ï¼šhttps://www.w3.org/TR/media-frags/#media-fragment-syntax\r\n","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/14/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","å‰ç«¯"]},{"id":11,"title":"ã€Pluginã€‘Vite Javascript obfuscator","created_at":"2024-10-25T03:29:18Z","updated_at":"2024-11-19T09:09:56Z","content":"# é€‚ç”¨äºViteç¯å¢ƒçš„JavaScriptæ··æ·†æ’ä»¶\r\n\r\n>ä»“åº“åœ°å€ï¼š[vite-plugin-bundle-obfuscator](https://github.com/z0ffy/vite-plugin-bundle-obfuscator)\r\n\r\n## â­ï¸ ç‰¹æ€§\r\n\r\n- [x] âš¡ æ”¯æŒ Vite é¡¹ç›®ä¸­çš„ JavaScript æ··æ·†ã€‚\r\n- [x] ğŸš€ å¤šçº¿ç¨‹æ”¯æŒï¼Œä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚\r\n- [x] âš™ï¸ å¯å®šåˆ¶çš„æ··æ·†å™¨é€‰é¡¹ï¼Œä»¥æ»¡è¶³æ‚¨çš„éœ€æ±‚ã€‚\r\n- [x] ğŸ›¡ï¸ è‡ªåŠ¨æ’é™¤ node_modulesã€‚\r\n- [x] ğŸ“¦ æ”¯æŒ node_modules æ‹†åˆ†å—ã€‚\r\n\r\n## âš ï¸ æ³¨æ„\r\n\r\n- å¦‚æœæ··æ·†é€‰é¡¹stringArrayä¸ºtrueã€‚\r\n    - æ‚¨çš„ç»“æœå¯èƒ½ä¼šä¸¢å¤±ä¸€äº›æ†ç»‘åŒ…ï¼ˆåœ¨__vite__mapDepsæ•°ç»„ä¸­ï¼‰ã€‚\r\n    - æˆ‘æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªå‡†ç¡®çš„æ¡ˆä¾‹ã€‚\r\n- å¦‚æœæ‰“åŒ…è¿‡ç¨‹ä¸­å‡ºç°å†…å­˜æº¢å‡ºã€‚ä¿®æ”¹æ‰“åŒ…å‘½ä»¤ä¸ºï¼šcross-env NODE_OPTIONS=--max-old-space-size=8192 VITE_CJS_IGNORE_WARNING=true vite buildï¼Œå…¶ä¸­ max-old-space-size æ ¹æ®æœºå™¨é…ç½®è‡ªè¡Œè®¾ç½®ã€‚\r\n- åœ¨è®¾ç½® node_modules åˆ†åŒ…æ—¶ï¼Œè¯·æŠŠå‡†ç¡®çš„åŒ…åå‰ç½®ã€‚ä¾‹å¦‚ï¼š[\"vue-router\", \"vue\"]ï¼Œ\"vue\"å¯ä»¥åŒæ—¶åŒ¹é…åˆ° vue ä»¥åŠ vue-routerã€‚\r\n\r\n## ğŸŒ åœ¨çº¿ç¤ºä¾‹\r\n\r\nâœ¦ [Vite - Vanilla](https://stackblitz.com/edit/vitejs-vite-zsytij?file=vite.config.js)\r\nâœ¦ [Vite - Vue](https://stackblitz.com/edit/vitejs-vite-ywho91?file=vite.config.js)\r\nâœ¦ [Vite - React](https://stackblitz.com/edit/vitejs-vite-wyeur4?file=vite.config.js)\r\nâœ¦ [Vite - PReact](https://stackblitz.com/edit/vitejs-vite-oujmks?file=vite.config.js)\r\nâœ¦ [Vite - lit](https://stackblitz.com/edit/vitejs-vite-ru4gws?file=vite.config.js)\r\nâœ¦ [Vite - Svelte](https://stackblitz.com/edit/vitejs-vite-fthdtu?file=vite.config.js)\r\nâœ¦ [Vite - Solid](https://stackblitz.com/edit/vitejs-vite-dcx3eh?file=vite.config.js)\r\nâœ¦ [Vite - Qwik](https://stackblitz.com/edit/vitejs-vite-i2bjvq?file=vite.config.js)\r\nâœ¦ ...\r\n\r\n\r\n## ğŸ“¦ å®‰è£…\r\n\r\n```bash\r\n# ä½¿ç”¨npm\r\nnpm install vite-plugin-bundle-obfuscator -D\r\n\r\n# ä½¿ç”¨pnpm\r\npnpm add vite-plugin-bundle-obfuscator -D\r\n\r\n# ä½¿ç”¨yarn\r\nyarn add vite-plugin-bundle-obfuscator -D\r\n```\r\n\r\n## ğŸ‘¨â€ğŸ’» ä½¿ç”¨\r\n\r\n1. ä½¿ç”¨æ‚¨é¦–é€‰çš„è½¯ä»¶åŒ…ç®¡ç†å™¨å®‰è£…æ’ä»¶ã€‚\r\n2. åœ¨vite.config.jsä¸­æ³¨å†Œæ’ä»¶ã€‚\r\n3. è‡ªå®šä¹‰æ··æ·†å™¨é…ç½®æˆ–ä½¿ç”¨é»˜è®¤é€‰é¡¹ã€‚\r\n\r\nç¤ºä¾‹:\r\n\r\n```javascript\r\nimport vitePluginBundleObfuscator from 'vite-plugin-bundle-obfuscator';\r\n\r\nconst defaultObfuscatorConfig = {\r\n  excludes: [],\r\n  enable: true,\r\n  log: true,\r\n  autoExcludeNodeModules: false,\r\n  threadPool: false,\r\n  options: {\r\n    compact: true,\r\n    controlFlowFlattening: true,\r\n    controlFlowFlatteningThreshold: 1,\r\n    deadCodeInjection: false,\r\n    debugProtection: false,\r\n    debugProtectionInterval: 0,\r\n    disableConsoleOutput: false,\r\n    identifierNamesGenerator: 'hexadecimal',\r\n    log: false,\r\n    numbersToExpressions: false,\r\n    renameGlobals: false,\r\n    selfDefending: true,\r\n    simplify: true,\r\n    splitStrings: false,\r\n    stringArray: false,\r\n    stringArrayCallsTransform: false,\r\n    stringArrayCallsTransformThreshold: 0.5,\r\n    stringArrayEncoding: [],\r\n    stringArrayIndexShift: true,\r\n    stringArrayRotate: true,\r\n    stringArrayShuffle: true,\r\n    stringArrayWrappersCount: 1,\r\n    stringArrayWrappersChainedCalls: true,\r\n    stringArrayWrappersParametersMaxCount: 2,\r\n    stringArrayWrappersType: 'variable',\r\n    stringArrayThreshold: 0.75,\r\n    unicodeEscapeSequence: false,\r\n  }\r\n};\r\n\r\nexport default {\r\n  plugins: [\r\n    // vitePluginBundleObfuscator()\r\n    vitePluginBundleObfuscator(defaultObfuscatorConfig)\r\n  ]\r\n};\r\n```\r\n","author":"z0ffy","reactions":{"url":"https://api.github.com/repos/z0ffy/z0ffy.github.io/issues/11/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"labels":["published","å‰ç«¯"]}],"tag":"å‰ç«¯"},"__N_SSG":true}